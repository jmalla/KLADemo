sap.ui.define(["jquery.sap.global","sap/ui/base/Object","sap/ui/core/format/NumberFormat","sap/ui/core/format/DateFormat","sap/m/MessageBox","sap/m/Table","sap/ui/model/Sorter","sap/ui/model/odata/type/Time","sap/suite/ui/generic/template/lib/testableHelper","sap/ui/model/json/JSONModel","sap/ui/core/mvc/ViewType","sap/suite/ui/generic/template/js/AnnotationHelper","sap/suite/ui/generic/template/lib/modelHelper","sap/ui/generic/app/navigation/service/SelectionVariant","sap/ui/core/mvc/Controller","sap/base/Log"],function(q,B,N,D,M,T,S,a,t,J,V,A,m,b,C,L){"use strict";function g(o,p,s){var d=o.getModel("entitySet").getMetaModel(),e=d.getObject(d.getMetaContext(o.sPath).sPath),P=d.getObject(d.getMetaContext(o.sPath+"/"+p).sPath),O="Org.OData.Measures.V1.Unit",f="Org.OData.Measures.V1.ISOCurrency",h={path:p,type:P.type,displayFormat:" ",label:s,textPath:p,textArrangement:A.getTextArrangement(e,P),fnGroupingFormatter:null},i,j,l,n;if(P){if(P.extensions){n=P.extensions.length;for(var k=0;k<n;k++){i=P.extensions[k];if(i.namespace==="http://www.sap.com/Protocols/SAPData"){switch(i.name){case"display-format":h.displayFormat=i.value;break;case"label":if(!h.label){h.label=i.value;}break;case"text":j=i.value;l=p.split("/");l[l.length-1]=j;h.textPath=l.join("/");break;default:break;}}}}if(h.label===""||h.label===undefined){h.label=p;}switch(h.type){case"Edm.DateTime":if(h.displayFormat==="Date"){h.dateFormat=D.getDateInstance({style:"medium"});}break;case"Edm.DateTimeOffset":h.dateFormat=D.getDateInstance({style:"medium"});break;case"Edm.Decimal":if(P[f]){h.unit=P[f].Path;h.numberFormat=N.getCurrencyInstance({showMeasure:false});}else{if(P[O]){h.unit=P[O].Path;}h.numberFormat=N.getFloatInstance({precision:P.precision,decimals:P.scale});}break;default:break;}}return h;}function G(p,s){var o;return function(d){var P,k,e,f,u;if(!o){o=g(d,p,s);}P=d.getProperty(p);switch(o.type){case"Edm.DateTime":if(o.displayFormat==="Date"){if(P&&P.getTime){f=new Date(0).getTimezoneOffset()*60*1000;P=o.dateFormat.format(new Date(P.getTime()+f));}}break;case"Edm.DateTimeOffset":if(P&&P.getTime){P=D.getDateTimeInstance({style:"medium"}).format(P);}break;case"Edm.Time":if(P){P=new a().formatValue(P,"string");}break;case"Edm.Boolean":if(P===true){P="{i18n>YES}";}else if(P===false){P="{i18n>NO}";}break;case"Edm.Decimal":u=(o.unit)?d.getProperty(o.unit):"";P=o.numberFormat.format(P,u);if(u){P+=" "+u;}break;default:break;}if(o.textPath&&o.textPath!==""){e=d.getProperty(o.textPath);}if(!e||o.textPath===p){k=P?P:"";}else{switch(o.textArrangement){case"idAndDescription":k=P+" ("+e+")";break;case"idOnly":k=P;break;case"descriptionOnly":k=e;break;default:k=e+(P?" ("+P+")":"");break;}}return{key:k?k:p,text:o.label?o.label+": "+k:k};};}function c(o,d,s,e){function E(i){var j={};for(var k in i){var x=i[k];if(typeof x==="string"){j[k]=x;}else if(typeof x==="object"){if(x.value){j[k]=E(x).value;}else{j[k]=x;}}}return j;}function h(i){if(i instanceof sap.ui.generic.app.navigation.service.NavError){if(i.getErrorCode()==="NavigationHandler.isIntentSupported.notSupported"){sap.m.MessageBox.show(e.getText("ST_NAV_ERROR_NOT_AUTHORIZED_DESC"),{title:e.getText("ST_GENERIC_ERROR_TITLE")});}else{sap.m.MessageBox.show(i.getErrorCode(),{title:e.getText("ST_GENERIC_ERROR_TITLE")});}}}function f(){var i=o.getView().getBindingContext();return s.oApplication.getDraftSiblingPromise(i);}function l(j){var k=j;var x=-1;var u1=e.getOwnerControl(j);if(u1.getTable){u1=u1.getTable();}var v1=e.isAnalyticalTable(u1);var w1=d.getViewLevel();var x1;if(!v1){var y1=e.getTableBindingInfo(u1);var z1=y1&&y1.binding;var A1=null;if(z1){if(e.isTreeTable(u1)){var B1=(z1.getLength()>0)?z1.getLength():0;if(B1>0){A1=[];for(var C1=0;C1<B1;C1++){A1.push(z1.getContextByIndex(C1));}}}else if(e.isUiTable(u1)){A1=z1.getContexts();}else if(u1 instanceof T){A1=z1.getCurrentContexts();}}var D1=null;var E1=null;if(k&&k.getBindingContext&&k.getBindingContext().getPath){E1=k.getBindingContext()?k.getBindingContext().getPath():null;}if(z1&&z1.getContexts&&E1){for(var i=0;i<A1.length;i++){D1=A1[i];if(D1&&D1.getPath()===E1){x=i;break;}}}if(u1&&x!==-1&&A1.length>0){var F1;if(u1 instanceof T){F1=u1.getGrowingThreshold();}else if(e.isUiTable(u1)){F1=u1.getThreshold();}var G1=w1>0?e.getTableBindingInfo(u1).path:null;var H1=function(I1){return{context:I1,navigationData:{navigationProperty:G1}};};x1=A1&&{listBinding:z1,growingThreshold:F1,selectedRelativeIndex:x,objectPageNavigationContexts:A1,navigitionInfoProvider:H1};}}d.setPaginatorInfo(x1,true);}function n(i,j){var k=i.getSource().getUrl();i.preventDefault();e.processDataLossConfirmationIfNonDraft(function(){sap.m.URLHelper.redirect(k,false);},q.noop,j);}function p(j){var k=[];return e.getDialogFragment("sap.suite.ui.generic.template.ListReport.view.fragments.DeleteConfirmation",{onCancel:function(i){var x=i.getSource().getParent();x.close();},onDelete:function(x){var u1=x.getSource().getParent();var v1=u1.getModel("delete");var w1=v1.getProperty("/items");var x1=[];var y1=[];var z1=[];k=[];for(var i=0;i<w1.length;i++){if(!w1[i].draftStatus.locked&&w1[i].deletable){if(!w1[i].draftStatus.draft){if(w1[i].draftStatus.draftActive){z1.push(w1[i].context.sPath);}else if(w1.length===v1.getProperty("/unsavedChangesItemsCount")||!w1[i].draftStatus.unsavedChanges||v1.getProperty("/checkboxSelected")){x1.push(w1[i].context.sPath);}}else{y1.push(w1[i].context.sPath);k.push(w1[i].context.sPath);}}}y1=y1.concat(x1).concat(z1);var A1=s.oCRUDManager.deleteEntities(y1);d.getBusyHelper().setBusy(A1);A1.then(function(B1){var C1=0;var D1=[];for(var i=0;i<B1.length;i++){D1.push("/"+B1[i].split('/')[1]);if(k.indexOf(D1[i])!==-1){C1=C1+1;}}var E1=j.getTable();E1.getModel("_templPriv").setProperty("/listReport/deleteEnabled",false);var F1=y1.length-z1.length-(B1.length-C1);if((B1.length-C1)>0){var G1="";if(F1>0){G1+=(F1>1)?e.getText("ST_GENERIC_DELETE_SUCCESS_PLURAL_WITH_COUNT",[F1]):e.getText("ST_GENERIC_DELETE_SUCCESS_WITH_COUNT",[F1]);G1+="\n";G1+=(B1.length>1)?e.getText("ST_GENERIC_DELETE_ERROR_PLURAL_WITH_COUNT",[B1.length]):e.getText("ST_GENERIC_DELETE_ERROR_WITH_COUNT",[B1.length]);}else{G1=(B1.length>1)?e.getText("ST_GENERIC_DELETE_ERROR_PLURAL"):e.getText("ST_GENERIC_DELETE_ERROR");}M.error(G1);}else{var H1="";H1=(F1>1)?e.getText("ST_GENERIC_DELETE_SUCCESS_PLURAL"):e.getText("ST_GENERIC_OBJECT_DELETED");s.oApplication.showMessageToast(H1);}e.refreshSmartTable(j);},q.noop);u1.close();}},"delete");}function r(i,j){return new Promise(function(k,x){j.read(i+"/SiblingEntity",{success:function(u1){var v1="/"+j.getKey(u1);k(v1);},error:function(u1){var v1="Error";k(v1);}});});}function u(j){var k=o.getView().getModel();var x=k.getMetaModel();var u1=x.getODataEntitySet(o.getOwnerComponent().getEntitySet());var v1=u1["Org.OData.Capabilities.V1.DeleteRestrictions"];var w1=(v1&&v1.Deletable&&v1.Deletable.Path)?v1.Deletable.Path:"";var x1={items:undefined,itemsCount:j.length,text:{title:undefined,text:undefined,unsavedChanges:undefined,longText:undefined,undeletableText:undefined},lockedItemsCount:0,unsavedChangesItemsCount:0,undeletableCount:0,checkboxSelected:true};var y1=[];var z1=[];var A1,B1,C1,D1,E1;var F1=[];for(var i=0;i<j.length;i++){A1=k.getObject(j[i].getPath());if(!A1.IsActiveEntity){if(A1.HasActiveEntity){F1.push(r(j[i].getPath(),k));}}}var G1=0;return new Promise(function(H1,I1){Promise.all(F1).then(function(J1){for(var i=0;i<j.length;i++){A1=k.getObject(j[i].getPath());B1={};C1={};D1=true;E1={};if(!A1.IsActiveEntity){B1.draft=true;if(A1.HasActiveEntity){C1.draft=false;C1.draftActive=true;if(J1[G1]!="Error"){E1["oModel"]=j[0].getModel();E1["sPath"]=J1[G1++];}}}else if(A1.HasDraftEntity){var K1=k.getProperty("DraftAdministrativeData/CreatedByUserDescription",j[i]);var L1=k.getProperty("DraftAdministrativeData/InProcessByUser",j[i]);if(L1){B1.locked=true;B1.user=K1;x1.lockedItemsCount++;}else{B1.unsavedChanges=true;B1.user=K1;x1.unsavedChangesItemsCount++;}}if(w1&&w1!==""){if(k.getProperty(w1,j[i])===false){D1=false;x1.undeletableCount++;}}y1.push({context:j[i],draftStatus:B1,deletable:D1});if(!A1.IsActiveEntity&&A1.HasActiveEntity){z1.push({context:E1,draftStatus:C1,deletable:D1});}}if(z1.length>0){y1=y1.concat(z1);}x1.items=y1;if(x1.lockedItemsCount===x1.itemsCount){x1.text.title=e.getText("ST_GENERIC_ERROR_TITLE");}else{x1.text.title=(x1.itemsCount>1)?e.getText("ST_GENERIC_DELETE_TITLE_WITH_COUNT",[x1.itemsCount]):e.getText("ST_GENERIC_DELETE_TITLE");}x1.text.unsavedChanges=e.getText("ST_GENERIC_UNSAVED_CHANGES_CHECKBOX");if(x1.itemsCount>1){if(x1.lockedItemsCount===x1.itemsCount){x1.text.text=e.getText("ST_GENERIC_DELETE_LOCKED_PLURAL");}else if(x1.unsavedChangesItemsCount===x1.itemsCount){x1.text.text=e.getText("ST_GENERIC_DELETE_UNSAVED_CHANGES_PLURAL");}else if(x1.lockedItemsCount>0){var M1=x1.itemsCount-x1.lockedItemsCount;x1.text.text=(x1.lockedItemsCount>1)?e.getText("ST_GENERIC_CURRENTLY_LOCKED_PLURAL",[x1.lockedItemsCount,x1.itemsCount]):e.getText("ST_GENERIC_CURRENTLY_LOCKED",[x1.itemsCount]);x1.text.text+="\n";if(M1===x1.unsavedChangesItemsCount){x1.text.text+=(M1>1)?e.getText("ST_GENERIC_DELETE_REMAINING_UNSAVED_CHANGES_PLURAL"):e.getText("ST_GENERIC_DELETE_REMAINING_UNSAVED_CHANGES");}else{x1.text.text+=(M1>1)?e.getText("ST_GENERIC_DELETE_REMAINING_PLURAL",[M1]):e.getText("ST_GENERIC_DELETE_REMAINING");}}else{x1.text.text=e.getText("ST_GENERIC_DELETE_SELECTED_PLURAL");}x1.text.undeletableText=e.getText("ST_GENERIC_DELETE_UNDELETABLE",[x1.undeletableCount,x1.itemsCount]);}else{if(x1.lockedItemsCount>0){x1.text.text=e.getText("ST_GENERIC_DELETE_LOCKED",[" ",x1.items[0].draftStatus.user]);}else if(x1.unsavedChangesItemsCount>0){x1.text.text=e.getText("ST_GENERIC_DELETE_UNSAVED_CHANGES",[" ",x1.items[0].draftStatus.user]);}else{x1.text.text=e.getText("ST_GENERIC_DELETE_SELECTED");}}H1(x1);});});}function v(i,j,k,x){var u1=e.getNavigationHandler();var v1={};var w1={};for(var x1 in i.parameters){if(q.isEmptyObject(i.parameters[x1])){v1[x1]=i.parameters[x1];}else{w1[x1]=i.parameters[x1];}}w1=E(w1);u1.mixAttributesAndSelectionVariant({},x).getParameterNames().forEach(function(x1){delete v1[x1];});var y1=k&&k.getObject();var z1=j&&j.getObject?j.getObject():j&&j[0];var A1=q.extend({},v1,y1,z1,w1);return u1.mixAttributesAndSelectionVariant(A1,x);}function w(i,j,k,x){var u1=e.getNavigationHandler();var v1;if(k){v1=k.getUiState().getSelectionVariant();if(typeof v1!=="string"){v1=JSON.stringify(v1);}}var w1=v(i,j,o.getView().getBindingContext(),v1);var x1={semanticObject:i.semanticObject,action:i.action};o.adaptNavigationParameterExtension(w1,x1);u1.navigate(i.semanticObject,i.action,w1.toJSONString(),null,h);}function y(i){var j=e.getNavigationHandler();var k={semanticObject:i.semanticObject,action:i.action};var x=j.mixAttributesAndSelectionVariant(i.semanticAttributes);o.adaptNavigationParameterExtension(x,k);j.navigate(i.semanticObject,i.action,x.toJSONString(),null,h);}function H(i,k){var x=i.byId("icon");var u1=x&&x.getSrc();if(u1===""){u1=undefined;}var v1=i.byId("title");var w1=v1&&v1.getText();if(w1===""){w1=undefined;}var x1=i.byId("description");var y1=x1&&x1.getText();if(y1===""){y1=undefined;}for(var j=0;j<k.length;j++){var z1=k[j];var A1=A.getStableIdPartFromFacet(z1)+"::contactTitleAreaIcon";var B1=i.byId(A1);var C1=A.getStableIdPartFromFacet(z1)+"::contactTitleAreaTitle";var D1=i.byId(C1);var E1=A.getStableIdPartFromFacet(z1)+"::contactTitleAreaDescription";var F1=i.byId(E1);var G1=B1&&B1.getSrc();if(G1===""){G1=undefined;}var H1=D1&&D1.getText();if(H1===""){H1=undefined;}var I1=F1&&F1.getText();if(I1===""){I1=undefined;}if(u1&&G1&&w1&&H1&&y1&&I1){if((u1===G1||!G1)&&(w1===H1||!H1)&&(y1===I1||!I1)){var J1=A.getStableIdPartFromFacet(z1)+"::contactTitleArea";var K1=i.byId(J1);if(K1&&K1.setVisible){K1.setVisible(false);}}}}}function z(i,j,k,x){var u1=o.getOwnerComponent().getAppComponent().getManifestEntry("sap.app");var v1=u1.crossNavigation.outbounds[i.data("CrossNavigation")];var w1;if(k){if(e.isSmartChart(i)){w1=e.getOwnerControl(x)||e.getOwnerControl(i);}else{w1=e.getOwnerControl(i).getParent();}}w(v1,j,k,w1);}function F(i,j){}function O(i,j){e.processDataLossConfirmationIfNonDraft(function(){var k=i.data('SemanticObject');var x=i.data('Action');var u1=i.data('SemanticAttributes');if(k&&x){var v1={semanticObject:k,action:x};if(u1){u1="{"+u1+"}";v1.semanticAttributes=JSON.parse(u1);}y(v1);}},q.noop);}function I(k,x,u1,v1,w1){var x1="";var y1=function(c2){var d2=c2.dependent.propertyRef;var e2=x.originalId;var f2=o.getView().byId(e2);if(f2&&f2.mProperties.fieldName){for(var g2 in d2){if(d2[g2].name===f2.mProperties.fieldName){x1=f2.mProperties.fieldName;return true;}}}if(!f2){var h2=q("#"+e2.replace(/(:|\.|\[|\]|,|=)/g,"\\$1"));if(h2){f2=h2.control(0);if(f2&&f2.mProperties.fieldName){for(var g2 in d2){if(d2[g2].name===f2.mProperties.fieldName){x1=f2.mProperties.fieldName;return true;}}}}}return false;};var z1=function(){var A1,H1,c2,d2,e2,f2,g2;H1=k.getModel().getMetaModel();c2=H1.getODataEntitySet(k.getEntitySet());d2=H1.getODataEntityType(c2.entityType);if(!d2||!d2.navigationProperty){return;}for(var i=0;i<d2.navigationProperty.length;i++){e2=d2.navigationProperty[i];if(e2.name==="SiblingEntity"||e2.name==="DraftAdministrativeData"){continue;}var h2=e2.relationship;var i2=h2.lastIndexOf(".");var j2=h2.slice(0,i2);var k2=h2.slice(i2+1);var l2=H1.getObject("/dataServices/schema");var m2;for(var j in l2){if(l2[j].namespace===j2){m2=l2[j];break;}}var n2=m2.association;var o2;for(var j in n2){if(n2[j].name===k2){o2=n2[j];break;}}var p2=o2.referentialConstraint;if(p2&&p2.dependent&&p2.dependent.propertyRef){var q2=y1(p2);if(q2){f2=H1.getODataAssociationEnd(d2,e2.name);g2=H1.getODataEntityType(f2.type);var r2=H1.getODataEntityContainer();var s2="";var t2="";var u2="";for(var j=0;j<r2.entitySet.length;j++){var v2=g2.entityType;if(!v2){v2=g2.namespace+"."+g2.name;}if(r2.entitySet[j].entityType===v2){s2=r2.entitySet[j].name;t2=r2.entitySet[j].entityType;break;}}A1={navigation:e2.name,entitySet:s2,entityType:t2};if(g2["com.sap.vocabularies.UI.v1.HeaderInfo"]&&t2){var u2=H1.getODataEntityType(t2,true)+"/com.sap.vocabularies.UI.v1.HeaderInfo";A1.headerInfoPath=u2;}if(g2["com.sap.vocabularies.UI.v1.QuickViewFacets"]&&t2){var w2=H1.getODataEntityType(t2,true)+"/com.sap.vocabularies.UI.v1.QuickViewFacets";A1.quickViewFacetODataPath=w2;}if(A1.headerInfoPath||A1.quickViewFacetODataPath){return A1;}}}}return A1;};var A1=z1();var B1=false;var C1=false;var D1=false;var E1=[];var F1=o.getOwnerComponent();var G1=F1.getModel();var H1=G1.getMetaModel();if(A1){if(A1.quickViewFacetODataPath){var I1=H1.createBindingContext(A1.quickViewFacetODataPath,true);var J1=I1&&I1.getModel().getObject(I1.getPath());if(J1){B1=true;for(var j=0;j<J1.length;j++){var K1=J1[j];if(K1&&K1.Target&&K1.Target.AnnotationPath){if(K1.Target.AnnotationPath.indexOf("com.sap.vocabularies.UI.v1.FieldGroup")>-1){C1=true;}else if(K1.Target.AnnotationPath.indexOf("com.sap.vocabularies.Communication.v1.Contact")>-1){D1=true;E1.push(K1);}}}}}}if(B1){var L1,M1;L1=H1.getODataEntitySet(k.getEntitySet());M1=H1.getODataEntityType(L1.entityType);var N1=A1.headerInfoPath&&H1.createBindingContext(A1.headerInfoPath,true);var w1=x.mainNavigation;var O1=x.semanticObject;var P1,Q1;if(O1&&w1){var R1=w1.getTarget&&w1.getTarget()||"";var S1=w1.getKey&&w1.getKey();if(S1){var T1=S1.split(O1+"-");P1=T1&&T1[1];if(O1&&P1){Q1={"Target":R1,"SemanticObject":O1,"Action":P1};}if(x.semanticAttributes){Q1.SemanticAttributes=x.semanticAttributes;for(var i in x.semanticAttributes){var U1=x.semanticAttributes[i];if(U1.indexOf("{\"__deferred\":")>-1){delete Q1.SemanticAttributes[i];}if(U1.indexOf("{\"__ref\":")>-1){delete Q1.SemanticAttributes[i];}}if(Q1.SemanticAttributes){var V1=JSON.stringify(Q1.SemanticAttributes);if(V1&&V1.length>1){Q1.SemanticAttributes=V1.substring(1,V1.length-1);}}}}}var W1=H1.getODataProperty(M1,x1);var X1=k&&k.mProperties&&k.mProperties.fieldSemanticObjectMap;var Y1=new J({sourceClickedField:W1,sourceEntityType:M1,showFieldGroup:C1,showContact:D1,ignoredFields:X1,navigationPath:A1.navigation,mainNavigation:Q1});Y1.setDefaultBindingMode("OneWay");var Z1;var $1=C.extend("",{oState:u1,_templateEventHandlers:{onSemanticObjectLinkNavigationPressed:o._templateEventHandlers.onSemanticObjectLinkNavigationPressed.bind(o._templateEventHandlers),onDataFieldWithIntentBasedNavigation:o._templateEventHandlers.onDataFieldWithIntentBasedNavigation.bind(o._templateEventHandlers)},onInit:function(){},onExit:function(){},onAfterRendering:function(){var _1=this.oView;var c2=_1.getParent().getParent().getParent();c2.setBusy(false);}});Z1=new $1();$1.connectToView=o.connectToView.bind(Z1);var _1=sap.ui.view({async:true,preprocessors:{xml:{bindingContexts:{sourceEntitySet:H1.createBindingContext(H1.getODataEntitySet(k.getEntitySet(),true)),entitySet:H1.createBindingContext(H1.getODataEntitySet(A1.entitySet,true)),header:N1,facetCollection:I1},models:{sourceEntitySet:H1,entitySet:H1,header:H1,facetCollection:H1,quickView:Y1,parameter:d.getParameterModelForTemplating()}}},controller:Z1,type:V.XML,viewName:"sap.suite.ui.generic.template.fragments.QuickViewSmartForm",height:"100%"});x.show(undefined,undefined,undefined,_1);var a2=function(c2){var d2=c2.getSource();if(d2){var e2=d2.getParent().getParent().getParent();e2.setBusy(true);e2.setBusyIndicatorDelay(10);}};_1.attachBeforeRendering(a2.bind(this));var b2=function(c2){var d2=c2.getSource();if(d2){var e2=d2.byId("ownTitleArea");if(e2){var f2=d2.getParent();if(f2&&f2.getItems){var g2=f2.getItems()&&f2.getItems()[0];if(g2&&g2!=d2){g2.setVisible(false);}}}if(D1&&E1&&e2){H(d2,E1);}}};_1.attachAfterRendering(b2.bind(this));}else{x.show(v1,w1,undefined,undefined);}}function K(o,i){var x=o.getView&&o.getView().getBindingContext();var u1=x.getObject();var v1=o.getOwnerComponent().getModel().getMetaModel();var w1=v1.getODataEntitySet(o.getOwnerComponent().getEntitySet());var x1=v1.getODataEntityType(w1.entityType);var y1=x1["com.sap.vocabularies.Common.v1.SemanticKey"];var z1={};if(y1&&y1.length>0){for(var j=0;j<y1.length;j++){var A1=y1[j].PropertyPath;if(!z1[A1]){z1[A1]=[];z1[A1].push(u1[A1]);}}}else{for(var k in x1.key.propertyRef){var B1=x1.key.propertyRef[k].name;if(!z1[B1]){z1[B1]=[];z1[B1].push(u1[B1]);}}}return z1;}function P(k,i,x,u1){if(k[i].entitySet==x&&u1===k[i].navigationProperty&&k[i].navigation&&k[i].navigation["display"]&&(k[i].component&&k[i].component.settings&&k[i].component.settings.hideChevronForUnauthorizedExtNav===true)){return k[i].navigation.display.target;}else if(k[i].entitySet==x&&k[i].navigation&&k[i].navigation["display"]&&(k[i].component&&k[i].component.settings&&k[i].component.settings.hideChevronForUnauthorizedExtNav===true)){return k[i].navigation.display.target;}else if(k[i].pages){for(var j=0;j<(k[i].pages.length);j++){var v1=P(k[i].pages,j,x,u1);if(v1!==undefined&&v1!==null){return v1;}}}}function Q(i){var j=i.getSource().getTable();var k=i.getSource().getEntitySet();var x=i.getSource().getTableBindingPath();var u1=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService&&sap.ushell.Container.getService("CrossApplicationNavigation");var v1=o.getOwnerComponent().getAppComponent().getConfig().pages;var w1=P(v1,0,k,x);if(w1!==undefined&&w1!==null&&u1){var x1=o.getOwnerComponent().getAppComponent().getManifestEntry("sap.app").crossNavigation.outbounds[w1];if(x1){var y1=x1.semanticObject;var z1=x1.action;var A1=o.getView().getModel("_templPriv");var B1=A1.getProperty("/generic/supportedIntents/");var C1=(x==="")?k:k+"::"+x;var D1=A1.getProperty("/generic/supportedIntents/"+y1+"/"+z1+"/"+C1);if(!D1){var E1={},F1;var G1=o.getOwnerComponent().getAppComponent();for(var H1 in x1.parameters){if(!q.isEmptyObject(x1.parameters[H1])){E1[H1]=x1.parameters[H1];}}if(o.getMetadata().getName()==='sap.suite.ui.generic.template.ObjectPage.view.Details'){F1=K(o,G1);}var I1={semanticObject:y1,action:z1};var J1=q.extend({},F1,E1);var K1={target:I1,params:J1};var L1=u1.isNavigationSupported([K1],G1);L1.done(function(M1){var N1=A1.getProperty("/generic/supportedIntents/"+y1);if(!N1){B1[y1]={};B1[y1][z1]={};B1[y1][z1][C1]={"supported":M1[0].supported};}else if(!N1[z1]){N1[z1]={};N1[z1][C1]={"supported":M1[0].supported};}else{N1[z1][C1]={"supported":M1[0].supported};}A1.updateBindings();if(M1[0].supported&&e.isUiTable(j)){var O1=j.getRowActionTemplate();O1.getItems()[0].setVisible(true);j.setRowActionTemplate(O1);}});}}}}function R(i){e.setEnabledToolbarButtons(i.getSource());Q(i);}function U(u1,v1){var w1=u1.getSource();var x1=w1.getTable();var y1=e.isMTable(x1);var z1=x1.getColumns();if(!v1||(v1&&!v1.isAnalyticalListPage)&&y1){for(var A1=0;A1<z1.length;A1++){if(z1[A1].getCustomData()[0].getValue()&&z1[A1].getCustomData()[0].getValue()["actionButton"]==="true"){z1[A1].setPopinDisplay("WithoutHeader");}}}var B1=u1.getParameter("bindingParams");B1.parameters=B1.parameters||{};if(w1.data().allowSearchWorkListLight){B1.parameters["custom"]={"search":u1.getSource().data().searchString};w1.data("allowSearchWorkListLight",false);if(u1.getSource().data().searchString){B1.parameters["custom"]={"search":u1.getSource().data().searchString};}}var C1=o.byId(w1.getSmartFilterId());if(!C1&&o.getMetadata().getName()==='sap.suite.ui.generic.template.ListReport.view.ListReport'){C1=o.byId("listReportFilter");var D1=C1.getBasicSearchValue();if(D1){B1.parameters["custom"]={"search":D1};}}v1=v1||Object.create(null);v1.setBindingPath=w1.setTableBindingPath.bind(w1);v1.addNecessaryFields=function(E1,F1,G1){var H1=w1.getModel().getMetaModel();var I1=H1.getODataEntitySet(G1);var J1=H1.getODataEntityType(I1.entityType);if(E1.length>0){if(!v1.isAnalyticalListPage){var K1={};for(var L1=0;L1<E1.length;L1++){var M1=E1[L1];if(M1){var K1=H1.getODataProperty(J1,M1);if(K1&&K1["com.sap.vocabularies.Common.v1.FieldControl"]&&K1["com.sap.vocabularies.Common.v1.FieldControl"].Path){var N1=K1["com.sap.vocabularies.Common.v1.FieldControl"].Path;if(N1!==" "){F1(N1);}}}}var O1=I1["Org.OData.Capabilities.V1.DeleteRestrictions"];F1(O1&&O1.Deletable&&O1.Deletable.Path);var P1=I1["Org.OData.Capabilities.V1.UpdateRestrictions"];F1(P1&&P1.Updatable&&P1.Updatable.Path);var Q1=J1["com.sap.vocabularies.UI.v1.LineItem"]||[];var R1=J1["com.sap.vocabularies.UI.v1.LineItem"];var S1=J1["com.sap.vocabularies.UI.v1.LineItem@com.sap.vocabularies.UI.v1.Criticality"];var T1=w1.getCustomData();for(var x=0;x<T1.length;x++){if(T1[x].getKey()&&T1[x].getKey()==="lineItemQualifier"){var U1=T1[x].getValue();if(U1){S1=J1["com.sap.vocabularies.UI.v1.LineItem#"+U1+"@com.sap.vocabularies.UI.v1.Criticality"];break;}}}F1(R1&&S1&&S1.Path);}else{var T1=w1.getCustomData(),Q1;for(var i=0;i<T1.length;i++){if(T1[i].getKey()&&T1[i].getKey()==="lineItemQualifier"&&T1[i].getValue()){var U1=T1[i].getValue();Q1=J1["com.sap.vocabularies.UI.v1.LineItem#"+U1];break;}}if(!Q1){Q1=J1["com.sap.vocabularies.UI.v1.LineItem"];}}for(var L1=0;L1<Q1.length;L1++){if(!v1.isAnalyticalListPage){var V1,W1;if(Q1[L1].RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"){V1=H1.getODataFunctionImport(Q1[L1].Action.String,true);if(V1){W1=H1.getObject(V1);if(W1["sap:action-for"]!==" "&&W1["sap:applicable-path"]!==" "){F1(W1["sap:applicable-path"]);}}}}if(Q1[L1].RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation"||(!v1.isAnalyticalListPage&&Q1[L1].RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath")){var X1,Y1;if(Q1[L1].Value&&Q1[L1].Value.Path){X1=H1.getODataProperty(J1,Q1[L1].Value.Path);if(X1){Y1=X1["sap:text"]||(X1["com.sap.vocabularies.Common.v1.Text"]||"").Path||"";}if(!Y1){Y1=Q1[L1].Value.Path;}F1(Y1);}}if(!v1.isAnalyticalListPage&&Q1[L1].RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){if(Q1[L1].Target&&Q1[L1].Target.AnnotationPath&&Q1[L1].Target.AnnotationPath.indexOf("com.sap.vocabularies.UI.v1.FieldGroup")>=0){var Z1=Q1[L1].Target.AnnotationPath;var $1=J1[Z1.split("@")[1]];Q1=Q1.concat($1&&$1.Data);continue;}if(Q1[L1].Target&&Q1[L1].Target.AnnotationPath){var Z1=Q1[L1].Target.AnnotationPath;var _1=Z1.split("@")[1];var $1=J1[_1];if($1&&$1.MeasureAttributes){if($1.MeasureAttributes[0]&&$1.MeasureAttributes[0].DataPoint&&$1.MeasureAttributes[0].DataPoint.AnnotationPath){var a2=$1.MeasureAttributes[0].DataPoint.AnnotationPath.split("@")[1];var b2=J1[a2];if(b2){for(var c2 in b2){F1(b2[c2]&&b2[c2].Path);if(c2==="CriticalityCalculation"&&b2.CriticalityCalculation){for(var d2 in b2.CriticalityCalculation){F1(b2.CriticalityCalculation[d2].Path);}}}}}}F1($1&&$1.Measures&&$1.Measures[0]&&$1.Measures[0].PropertyPath);}}}if(!v1.isAnalyticalListPage){var e2=e.getBreakoutActions(w1);for(var f2 in e2){F1(e2[f2].requiresSelection&&e2[f2].applicablePath);}}}var g2=w1.getCustomData();var h2={};for(var k=0;k<g2.length;k++){h2[g2[k].getKey()]=g2[k].getValue();}var i2=w1.fetchVariant();if(!h2.TemplateSortOrder&&v1&&v1.determineSortOrder){h2.TemplateSortOrder=v1.determineSortOrder();}if((!i2||!i2.sort)&&h2.TemplateSortOrder){var j2=h2.TemplateSortOrder.split(", ");for(var j=0;j<j2.length;j++){var k2=j2[j].split(" ");if(k2.length>1){B1.sorter.push(new S(k2[0],k2[1]==="true"));}else{B1.sorter.push(new S(k2[0]));}}}if(y1){var l2=B1.sorter.filter(function(m2){return m2.vGroup;});if(l2.length){var m2=l2[0];var n2=m.getODataProperty(H1,J1,m2.sPath);var o2=n2["com.sap.vocabularies.Common.v1.Text"]&&n2["com.sap.vocabularies.Common.v1.Text"].Path;F1(o2);if(i2.group&&i2.group.groupItems&&i2.group.groupItems.length){var p2=i2.group.groupItems[0].columnKey;var q2=z1.filter(function(v2){return v2.data("p13nData").columnKey===p2;});if(q2.length){var r2=q2[0];var s2=r2.data("p13nData").additionalProperty;if(s2){s2.split(",").forEach(function(v2){F1(v2);});}var t2=r2.getHeader().getText();m2.fnGroup=G(m2.sPath,t2);}}}}if(!v1.isAnalyticalListPage){var u2=s.oDraftController.getDraftContext();if(u2.isDraftEnabled(G1)&&u2.isDraftRoot(G1)&&u2.hasDraftAdministrativeData(G1)){if(E1.length>0){F1("DraftAdministrativeData");}}}};e.onBeforeRebindTableOrChart(u1,v1,C1);}function W(i,j,k){k=k||i.getBindingContext();e.processDataLossConfirmationIfNonDraft(function(){if(i.data("CrossNavigation")){z(i,k,j.oSmartFilterbar);return;}var x=e.getOwnerControl(i);l(i);e.navigateFromListItem(k,x);},q.noop,j);}function X(i){s.oApplication.performAfterSideEffectExecution(function(){if(s.oApplication.getBusyHelper().isBusy()){L.info("Ignore incorrect selection, since app is busy anyway");return;}var j=i?"ST_GENERIC_MULTIPLE_ITEMS_SELECTED":"ST_GENERIC_NO_ITEM_SELECTED";M.error(e.getText(j),{styleClass:e.getContentDensityClass()});});}function Y(i,j){var k=i.getParent().getParent().getTable();var x=e.getSelectedContexts(k);if(x.length===1){e.processDataLossConfirmationIfNonDraft(function(){if(i.data("CrossNavigation")){z(i,x[0],j.oSmartFilterbar);return;}l(i);e.navigateFromListItem(x[0],k);},q.noop,j);}else{X(x.length);}}function Z(k){var x,i,u1;var v1=o.getOwnerComponent(),w1=k.getSource().getCustomData(),x1="10rem";if(w1.length===0){return;}for(i=0,u1=w1.length;i<u1;i++){if(w1[i].getProperty("key")==="Target"){x=w1[i].getProperty("value");break;}}if(!x){M.show(e.getText("ST_GENERIC_ERROR_IN_NAVIGATION"),{icon:M.Icon.ERROR,title:e.getText("ST_ERROR"),actions:[sap.m.MessageBox.Action.CLOSE],horizontalScrolling:true,contentWidth:x1,details:e.getText("ST_GENERIC_ERROR_IN_NAVIGATION_PROPERTY_MISSING",["DataFieldWithNavigationPath"])});return;}var y1=v1.getModel(),z1=y1.getMetaModel();var A1=k.getSource().getBindingContext().getPath(),B1=A1.slice(1,A1.indexOf("(")),C1=z1.getODataEntityType(z1.getODataEntitySet(B1).entityType),j,D1=false,E1=C1.navigationProperty.length;for(j=0;j<E1;j++){if(C1.navigationProperty[j].name===x){D1=true;break;}}if(!D1){M.show(e.getText("ST_GENERIC_ERROR_IN_NAVIGATION"),{icon:M.Icon.ERROR,title:e.getText("ST_ERROR"),actions:[sap.m.MessageBox.Action.CLOSE],horizontalScrolling:true,contentWidth:x1,details:e.getText("ST_GENERIC_ERROR_NAVIGATION_PROPERTY_NOT_CORRECT",[x,"DataFieldWithNavigationPath"])});return;}var F1=z1.getODataAssociationEnd(C1,x),G1=z1.getODataEntityType(F1.type),H1,I1;if(G1){H1=G1.namespace+"."+G1.name;}var J1=z1.getODataEntityContainer().entitySet;for(i=0,u1=J1.length;i<u1;i++){if(J1[i].entityType===H1){I1=J1[i].name;break;}}if(!I1){var K1=H1.split(".")[1];K1=K1.slice(0,K1.length-4);M.show(e.getText("ST_GENERIC_ERROR_IN_NAVIGATION"),{icon:M.Icon.ERROR,title:e.getText("ST_ERROR"),actions:[sap.m.MessageBox.Action.CLOSE],horizontalScrolling:true,contentWidth:x1,details:e.getText("ST_NAV_ERROR_TARGET_ENTITYSET_IS_MISSING",[K1])});return;}var L1=e.getNavigationKeyProperties(I1),M1=s.oNavigationController,N1={"$expand":""};if(d.isDraftEnabled()){N1={"$expand":"DraftAdministrativeData"};}var O1=new Promise(function(P1,Q1){y1.read(A1+"/"+x,{urlParameters:N1,success:function(R1){P1(R1);s.oApplication.invalidatePaginatorInfo();var S1=e.mergeNavigationKeyPropertiesWithValues(L1,R1);s.oApplication.setStoredTargetLayoutToFullscreen(1);M1.navigateToContext(S1,null,false);},error:function(R1){Q1(R1);}});});d.getBusyHelper().setBusy(O1);}function $(i,j){var k=i.getSource();var x=e.getElementCustomData(k);var u1=e.getOwnerControl(k);u1=e.isMTable(u1)?u1.getParent():u1;var v1=e.getSelectedContexts(u1);b1(k,x,v1,j);}function _(i,j){var k=new b(j);for(var x in i){var u1=i[x].getObject(i[x].sPath);for(var v1 in u1){if(u1[v1]){if(typeof u1[v1]!=="object"){k.addSelectOption(v1,"I","EQ",u1[v1].toString());}else{k.addSelectOption(v1,"I","EQ",JSON.stringify(u1[v1]));}}}}return k;}function a1(i,j){var k=i.getSource();var x=k.getParent().getBindingContext();var u1=k.data("SemanticObject");var v1=k.data("Action");e.processDataLossConfirmationIfNonDraft(function(){var w1={action:v1,semanticObject:u1};w(w1,x,j.oSmartFilterbar||undefined,j.oSmartTable||undefined);},q.noop,j);}function b1(i,j,k,x){var u1={action:j.Action,semanticObject:j.SemanticObject};if(k.length<=1){e.processDataLossConfirmationIfNonDraft(function(){w(u1,k[0],x.oSmartFilterbar||undefined,x.oSmartTable||undefined);},q.noop,x);}else{var v1=e.getNavigationHandler();var w1=i.data("fe_multiValue");var x1=function(){var z1=x.oSmartFilterbar.getUiState().getSelectionVariant();var A1=_(k,z1);v1.navigate(u1.semanticObject,u1.action,A1.toJSONString(),null,h);return;};if(w1===null){var y1=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService&&sap.ushell.Container.getService("CrossApplicationNavigation");u1.tags=["fe_multiValue"];y1.getLinks(u1).then(function(z1){var A1=z1[0];if(A1){i.data("fe_multiValue",true);e.processDataLossConfirmationIfNonDraft(x1,q.noop,x);}else{i.data("fe_multiValue",false);X(k.length);}});}else if(w1===true){e.processDataLossConfirmationIfNonDraft(x1,q.noop,x);}else{X(k.length);}}}function c1(i,j,k){var x=e.getElementCustomData(i);var u1=e.getSelectedContexts(j);var v1=!(x.RequiresContext&&x.RequiresContext==="false");if(v1&&!u1.length){X(u1.length);}else{b1(i,x,u1,k);}}function d1(i,j){e.processDataLossConfirmationIfNonDraft(function(){var k={semanticObject:i.data("SemanticObject"),action:i.data("Action")};var x=i.getParent().getBindingContext();w(k,x,j.oSmartFilterbar,j.oSmartTable);},q.noop,j);}function e1(i,j){var k=i.getSource();var x=e.getOwnerControl(k).getParent();var u1=[k.getBindingContext()];var v1=e.getElementCustomData(k);var w1=x.getEntitySet();e.triggerAction(u1,w1,v1,x,j);}function f1(i,j){var k=o.getView();var x=j?e.getSelectedContexts(j):[k.getBindingContext()];if(x.length===0){X(x.length);}else{var u1=i.getSource();var v1=e.getElementCustomData(u1);var w1=j?j.getEntitySet():o.getOwnerComponent().getEntitySet();e.triggerAction(x,w1,v1,j);}}function g1(i,j){var k,x="";var u1=e.getOwnerControl(i.getSource());u1=e.isMTable(u1)?u1.getParent():u1;var v1=i.getSource().data();var w1=e.getSelectedContexts(u1);if(e.isSmartTable(u1)){k=u1.getTable();x=u1.getEntitySet();}else if(e.isSmartChart(u1)){k=u1.getChart();x=u1.getEntitySet();}var x1=i1(w1,v1);if(!x1){return;}if(x1.inApplicableCount>0&&(e.isSmartTable(u1)&&((k.getMode&&k.getMode()==="MultiSelect")||(k.getSelectionMode&&k.getSelectionMode()==="MultiToggle")))){var y1=e.getText("ST_GENERIC_WARNING_TEXT",[x1.inApplicableCount]);x1.warningText=y1;var z1={functionImportPath:v1.Action,contexts:x1.aApplicableContexts,sourceControl:k,label:v1.Label,operationGrouping:v1.InvocationGrouping,navigationProperty:"",sEntitySet:x,oState:j};var A1=h1(u1);var B1=A1.getModel("Action");B1.setData(z1);var C1=new sap.ui.model.json.JSONModel(x1);A1.setModel(C1,"list");var D1=A1.getModel("list");D1.setData(x1);A1.open();}else{j1({functionImportPath:v1.Action,contexts:w1,sourceControl:k,label:v1.Label,operationGrouping:v1.InvocationGrouping,navigationProperty:""},j,x);}}function h1(i){return e.getDialogFragment("sap.suite.ui.generic.template.fragments.ActionConfirmation",{onCancel:function(j){var k=j.getSource().getParent();k.close();},onContinue:function(j){var k=j.getSource().getParent();var x=j.getSource().getParent().getModel("Action").getData();j1({functionImportPath:x.functionImportPath,contexts:x.contexts,sourceControl:x.sourceControl,label:x.label,operationGrouping:x.operationGrouping,navigationProperty:x.navigationProperty},x.oState,x.sEntitySet);k.close();}},"Action");}function i1(j,k){var x,u1,v1,w1;var x1=o.getView().getModel();var y1=x1.getMetaModel();if(j&&j.length>0){v1=j[0].sPath.substring(1,j[0].sPath.indexOf('('));w1=y1.getODataEntitySet(v1);}if(w1){var z1=k.Action.split("/")[1];var A1=[],B1=[];var C1={aInApplicableItems:undefined,inApplicableCount:0,dialogTitle:k.Label,warningText:undefined,aApplicableContexts:undefined};if(z1){u1=y1.getODataFunctionImport(z1)["sap:applicable-path"];}for(var i=0;i<j.length;i++){x=x1.getObject(j[i].getPath());if(!x[u1]){C1.inApplicableCount++;var D1=y1.getODataEntityType(y1.getODataEntitySet(v1).entityType);var E1=D1["com.sap.vocabularies.UI.v1.HeaderInfo"].Title.Value;var F1="";if(E1.Path){F1=j[i].getProperty(E1.Path);}else{F1=E1.String||"";}A1.push({sKey:F1});}else{B1.push(j[i]);}}C1.aInApplicableItems=A1;C1.aApplicableContexts=B1;}return C1;}function j1(j,k,x){var u1;e.processDataLossConfirmationIfNonDraft(function(){s.oCRUDManager.callAction({functionImportPath:j.functionImportPath,contexts:j.contexts,sourceControl:j.sourceControl,label:j.label,operationGrouping:j.operationGrouping,navigationProperty:j.navigationProperty},k).then(function(v1){if(v1&&v1.length){for(var i=0;i<v1.length;i++){u1=v1[i];if(u1.response&&u1.response.context&&(!u1.actionContext||u1.actionContext&&u1.response.context.getPath()!==u1.actionContext.getPath())){s.oApplication.getBusyHelper().getUnbusy().then(s.oViewDependencyHelper.setMeToDirty.bind(null,o.getOwnerComponent(),x));break;}}}});},q.noop,k,"Proceed");}var k1;var l1;function m1(i){k1=true;l1=i;var j=e.getDialogFragment("sap.suite.ui.generic.template.fragments.DiscardDraftPopover",{onDiscardConfirm:function(){L.info("Draft cancellation confirmed");if(!k1){L.info("Draft popover no longer active -> Ignore.");return;}l1();}},"discard");return j;}function n1(i,j){var k=new Promise(function(u1,v1){i.then(function(w1){L.info("Active information for current draft has been read. Start discarding the draft");var x1=w1&&w1.getObject();var y1=x1&&x1.IsActiveEntity;var z1=y1?s.oApplication.getTargetAfterCancelPromise(w1):Promise.resolve();z1.then(function(A1){var B1=s.oCRUDManager.deleteEntity(false,true);if(!A1){s.oApplication.prepareDeletionOfCreateDraft(B1);}B1.then(function(){L.info("Draft was discarded successfully");j();s.oViewDependencyHelper.setRootPageToDirty();s.oViewDependencyHelper.unbindChildren(o.getOwnerComponent());s.oApplication.invalidatePaginatorInfo();if(A1){var C1=w1.getModel();C1.invalidateEntry(w1);L.info("Navigate to active entityy");s.oNavigationController.navigateToContext(A1,null,true,1,true);}u1();},v1);},v1);},v1);});var x={discardPromise:k};d.fire(o,"AfterCancel",x);s.oApplication.getBusyHelper().setBusy(k);k.catch(j);return k;}function o1(i,j){var k=f();s.oApplication.performAfterSideEffectExecution(function(){if(s.oApplication.getBusyHelper().isBusy()){L.info("Ignore discarding confirmation as app is already busy");return;}var x=o.getView().getBindingContext();var u1=x.getObject();var v1=u1.hasOwnProperty("HasActiveEntity")&&!x.getProperty("IsActiveEntity")&&!x.getProperty("HasActiveEntity");var w1=x&&x.getPath();var x1=s.oApplication.getIsDraftModified(w1)||j.hasValidationMessageOnDetailsViews();if(x1){var y1=i.getSource();var z1;var A1=function(){k1=false;z1.close();L.info("Draft popover closed");};z1=m1(n1.bind(null,k,A1));var B1=z1.getModel("discard");B1.setProperty("/placement",sap.m.PlacementType.Top);B1.setProperty("/isCreateDraft",v1);z1.openBy(y1);}else{n1(k,q.noop);}});}function p1(){if(d.getViewLevel()!==1||!d.isDraftEnabled()){L.warning("Discard draft only possible on root level of draft enabled entities");return Promise.reject();}var i=o.getOwnerComponent();if(!(d.isComponentActive()&&i.getModel("ui").getProperty("/editable"))){L.warning("Discard draft only possible in edit mode");return Promise.reject();}var j=f();return n1(j,q.noop);}function q1(i,j,k,x){if(i.data("CrossNavigation")){z(i,i.getBindingContext(),k);return new Promise(function(z1){z1();});}var u1=e.getOwnerControl(i);u1=e.isSmartTable(u1)?u1:u1.getParent();var v1=u1.getTableBindingPath();var w1=u1.getEntitySet();var x1=o.getOwnerComponent();var y1=function(z1){var A1=s.oCRUDManager.addEntry(u1,z1).then(function(B1){if(!j){s.oNavigationController.navigateToContext(B1.newContext,B1.tableBindingPath,false,4);s.oApplication.getBusyHelper().getUnbusy().then(s.oViewDependencyHelper.setMeToDirty.bind(null,x1,w1));}else{e.refreshSmartTable(u1);s.oApplicationController.executeSideEffects(x1.getBindingContext(),[],[v1]);}});A1.catch(q.noop);return A1;};if(x instanceof Promise){return x.then(y1);}else{return y1(x);}}function r1(){var i={batchGroupId:"Changes",changeSetId:"Changes",draftSave:true,noBlockUI:true,noShowResponse:true,onlyIfPending:true,pendingChanges:true};s.oTransactionController.triggerSubmitChanges(i);}function s1(i){var j=e.getOwnerControl(i.getSource());j=e.isMTable(j)?j.getParent():j;var k=e.getSelectedContexts(j);if(k&&k.length>0){var x=u(k);var u1=Promise.resolve(o.beforeDeleteExtension({aContexts:k}));u1.then(function(v1){var w1=s.oApplication.getBusyHelper();w1.setBusy(x);x.then(function(x1){q.extend(x1.text,v1);var y1=p(j);var z1=y1.getModel("delete");z1.setData(x1);y1.open();},q.noop);});}else{M.error(e.getText("ST_GENERIC_NO_ITEM_SELECTED"),{styleClass:e.getContentDensityClass()});}}function t1(j){var k=j.getSource().getModel();var x=JSON.parse(j.getSource().data("contactDetails"));var u1=e.getDialogFragment("sap.suite.ui.generic.template.fragments.ContactDetails",{},"contact");var v1=u1.getModel("contact");var w1=k.getContext(j.getSource().getBindingContext().getPath());var x1;v1.setProperty("/",{});(x.fn&&x.fn.Path)?v1.setProperty("/fn",(w1.getProperty(x.fn.Path))):v1.setProperty("/fn",(x.fn&&x.fn.String));(x.title&&x.title.Path)?v1.setProperty("/title",(w1.getProperty(x.title.Path))):v1.setProperty("/title",(x.title&&x.title.String));(x.photo&&x.photo.Path)?v1.setProperty("/photo",(w1.getProperty(x.photo.Path))):v1.setProperty("/photo",(x.photo&&x.photo.String));(x.role&&x.role.Path)?v1.setProperty("/role",(w1.getProperty(x.role.Path))):v1.setProperty("/role",(x.role&&x.role.String));(x.org&&x.org.Path)?v1.setProperty("/org",(w1.getProperty(x.org&&x.org.Path))):v1.setProperty("/org",(x.org&&x.org.String));if(x.email&&x.email[0]&&!v1.getProperty("/email")){x1=x.email[0].type&&x.email[0].type.EnumMember;if(x1&&x1.indexOf("com.sap.vocabularies.Communication.v1.ContactInformationType/work")>-1){if(x.email[0].address&&x.email[0].address.Path){v1.setProperty("/email",(w1.getProperty(x.email[0].address.Path)));}else{v1.setProperty("/email",(x.email[0].address&&x.email[0].address.String));}}}var y1=(x.tel&&x.tel.length)||0;for(var i=0;i<y1;i++){if(x.tel[i]&&!v1.getProperty("/fax")){x1=x.tel[i].type&&x.tel[i].type.EnumMember;if(x1&&x1.indexOf("com.sap.vocabularies.Communication.v1.PhoneType/fax")>-1){if(x.tel[i].uri&&x.tel[i].uri.Path){v1.setProperty("/fax",(w1.getProperty(x.tel[i].uri.Path)));}else{v1.setProperty("/fax",(x.tel[i].uri&&x.tel[i].uri.String));}continue;}}if(x.tel[i]&&!v1.getProperty("/cell")){x1=x.tel[i].type&&x.tel[i].type.EnumMember;if(x1&&x1.indexOf("com.sap.vocabularies.Communication.v1.PhoneType/cell")>-1){if(x.tel[i].uri&&x.tel[i].uri.Path){v1.setProperty("/cell",(w1.getProperty(x.tel[i].uri.Path)));}else{v1.setProperty("/cell",(x.tel[i].uri&&x.tel[i].uri.String));}continue;}}if(x.tel[i]&&!v1.getProperty("/work")){x1=x.tel[i].type&&x.tel[i].type.EnumMember;if(x1&&x1.indexOf("com.sap.vocabularies.Communication.v1.PhoneType/work")>-1){if(x.tel[i].uri&&x.tel[i].uri.Path){v1.setProperty("/work",(w1.getProperty(x.tel[i].uri.Path)));}else{v1.setProperty("/work",(x.tel[i].uri&&x.tel[i].uri.String));}continue;}}}u1.openBy(j.getSource());}var v=t.testable(v,"fnBuildSelectionVariantForNavigation");var E=t.testable(E,"fnEvaluateParameters");var w=t.testable(w,"fnNavigateIntent");var H=t.testable(H,"fnHideTitleArea");return{onDataReceived:R,onBeforeRebindTable:U,onListNavigate:W,onShowDetails:Y,onEditNavigateIntent:z,onSemanticObjectLinkPopoverLinkPressed:F,onDataFieldWithNavigationPath:Z,onDataFieldForIntentBasedNavigation:$,onDeterminingDataFieldForIntentBasedNavigation:c1,onDeterminingDataFieldForAction:f1,onInlineDataFieldForIntentBasedNavigation:d1,onDataFieldWithIntentBasedNavigation:a1,onInlineDataFieldForAction:e1,onSmartFieldUrlPressed:n,onCallActionFromToolBar:g1,onDiscardDraft:o1,discardDraftWithoutDialog:p1,addEntry:q1,deleteEntries:s1,onContactDetails:t1,onSemanticObjectLinkNavigationTargetObtained:I,onSemanticObjectLinkNavigationPressed:O,submitChangesForSmartMultiInput:r1};}return B.extend("sap.suite.ui.generic.template.lib.CommonEventHandlers",{constructor:function(o,d,s,e){q.extend(this,c(o,d,s,e));}});});
