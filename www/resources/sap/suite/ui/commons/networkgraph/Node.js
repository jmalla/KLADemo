/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/thirdparty/jquery","sap/suite/ui/commons/library","./ElementBase","./ElementAttribute","sap/ui/core/IconPool","sap/ui/Device","sap/base/security/encodeXML","sap/m/CheckBox"],function(q,l,E,a,I,D,b,C){"use strict";var S=l.networkgraph.NodeShape,A=l.networkgraph.ActionButtonPosition,H=l.networkgraph.HeaderCheckboxState;var c=32,T=5,M=80,d=4;var f={Circle:{WIDTH:96,HEIGHT:64},Box:{WIDTH:160,HEIGHT:32},Attributes:{LINE:16,OFFSET:8},ActionButtons:{RADIUS:13,MARGIN:8,OFFSET:4},Title:{LINESIZE:15,OFFSET:8,ICON_SIZE:16,INFO_BOX_SIZE:20,ICON_X_OFFSET:6,IMAGE_OFFSET_Y:6},Description:{LINESIZE:15},Image:{Box:16,Circle:32}};var g={EXPANDED:"Expanded",COLLAPSED:"Collapsed",PARTIAL:"Partial"};var h={EXPAND:"sys-add",COLLAPSE:"sys-minus",PARTIAL:"overlay"};var s=I.getIconInfo(h.EXPAND),j=I.getIconInfo(h.COLLAPSE),k=I.getIconInfo(h.PARTIAL);s=s&&s.content;j=j&&j.content;k=k&&k.content;var r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var N=E.extend("sap.suite.ui.commons.networkgraph.Node",{metadata:{library:"sap.suite.ui.commons",properties:{headerCheckBoxState:{type:"sap.suite.ui.commons.networkgraph.HeaderCheckboxState",group:"Misc",defaultValue:H.Hidden},collapsed:{type:"boolean",group:"Misc",defaultValue:false},selected:{type:"boolean",group:"Misc",defaultValue:false},group:{type:"string",group:"Misc",defaultValue:null},key:{type:"string",group:"Misc",defaultValue:null},shape:{type:"sap.suite.ui.commons.networkgraph.NodeShape",groups:"Behavior",defaultValue:S.Circle},icon:{type:"string",group:"Appearance",defaultValue:null},statusIcon:{type:"string",group:"Appearance",defaultValue:null},width:{type:"int",group:"Misc",defaultValue:undefined},height:{type:"int",group:"Misc",defaultValue:undefined},maxWidth:{type:"int",group:"Misc",defaultValue:undefined},x:{type:"float",group:"Misc",defaultValue:0},y:{type:"float",group:"Misc",defaultValue:0},showExpandButton:{type:"boolean",defaultValue:true},showActionLinksButton:{type:"boolean",defaultValue:true},showDetailButton:{type:"boolean",defaultValue:true},titleLineSize:{type:"int",defaultValue:1},descriptionLineSize:{type:"int",defaultValue:-1},iconSize:{type:"int",group:"Appearance",defaultValue:undefined},coreNodeSize:{type:"int",group:"Appearance",defaultValue:0}},aggregations:{actionLinks:{type:"sap.ui.core.Control",multiple:true,singularName:"actionLink"},actionButtons:{type:"sap.suite.ui.commons.networkgraph.ActionButton",multiple:true,singularName:"actionButton"},image:{type:"sap.suite.ui.commons.networkgraph.NodeImage",multiple:false,singularName:"nodeImage"},content:{type:"sap.ui.core.Control",multiple:false},_checkBox:{type:"sap.m.CheckBox",multiple:false,visibility:"hidden"}},events:{headerCheckBoxPress:{parameters:{checked:"boolean"}},press:{},hover:{},collapseExpand:{}}},onAfterRendering:function(){this._afterRenderingBase();}});N.prototype.aProcessRequiredProperties=["key","group"];N.prototype.init=function(o){this._oExpandState=g.EXPANDED;this._oGroup=null;this._iWidth=0;this._iHeight=0;this._iLabelAttrWidth=0;this._iValueAttrWidth=0;this._aTitleLines=[[]];this._aDescriptionLines=[[]];this._bIsHidden=false;this._bActionButtonsRendered=false;this._iCircleSize=0;this._iGroupIndex=-1;this._clearChildren();};N.prototype._clearChildren=function(){this.aChildren=[];this.aParents=[];this.aLines=[];this.aParentLines=[];};N.prototype._afterRendering=function(){var $=this.$();if(this._oGroup&&this._oGroup.getCollapsed()){return;}this._correctTitle("sapSuiteUiCommonsNetworkNodeTitle");this._setupEvents();if(this._bIsHidden){$.hide();}if(this._oExpandState===g.COLLAPSED){$.addClass("sapSuiteUiCommonsNetworkNodeCollapsed");}if(this._oExpandState===g.PARTIAL){$.addClass("sapSuiteUiCommonsNetworkNodePartialCollapsed");}this.$(this.getId()+"actionbuttons").detach();this._bActionButtonsRendered=false;this._removeFromInvalidatedControls();if(this._isHtml()&&!N.hasNativeLineClamp){this._setTextHeight($.find(".sapSuiteUiCommonsNetworkGraphDivNodeTitle"),this.getTitleLineSize());this._setTextHeight($.find(".sapSuiteUiCommonsNetworkGraphDivNodeDescription"),this.getDescriptionLineSize());}};N.prototype._render=function(o){var p=this.getParent(),u=p&&p._isUseNodeHtml();if(this._isIgnored()||!this.getVisible()){return"";}o=o||{};return u?this._renderHtml(o):this._renderSvg(o);};N.prototype._renderHtmlInfoIcon=function(m){m=m||{};var e="",i=this.getStatusIcon(),n=this._convertToStyle(m);e+="<div title=\""+r.getText("NETWORK_GRAPH_COLLAPSED")+"\" id=\""+this.getId()+"-statusiconwrapper"+"\" "+n+" class=\"sapSuiteUiCommonsNetworkNodeDivInfoWrapper sapSuiteUiCommonsNetworkNodeInfoWrapper\" >";e+="<div class=\"sapSuiteUiCommonsNetworkNodeDivInfoIcon sapSuiteUiCommonsNetworkGraphDivNodeIcon\" >";e+=this._renderHtmlIcon(i||"sap-icon://notification");e+="</div>";e+="</div>";return e;};N.prototype._renderHtmlText=function(t,i,e,m){var n=this._renderHtmlElement("div",{"-webkit-line-clamp":i===0?"":i,"color":m},{"class":"sapSuiteUiCommonsNetworkGraphDivNodeText "+(e||"")+((i===1)?" sapSuiteUiCommonsNetworkGraphDivTextBreakAll ":"")});n+=b(t);n+="</div>";return n;};N.prototype._renderHtmlTitle=function(e){var t=this.getTitle(),i="";if(t){i+=this._renderHtmlText(t,this.getTitleLineSize(),"sapSuiteUiCommonsNetworkGraphDivNodeTitleText sapSuiteUiCommonsNetworkGraphDivNodeTitle",e);i+="<div style=\"clear:both\"></div>";}return i;};N.prototype._renderHtmlDescription=function(e){var i=this.getDescriptionLineSize(),m=this.getDescription();if(m&&i!=-1){return this._renderHtmlText(m,i,"sapSuiteUiCommonsNetworkGraphDivNodeDescription",e);}return"";};N.prototype._renderHtmlTitleAndDescription=function(t){return this._renderHtmlTitle()+this._renderHtmlDescription();};N.prototype._renderHtmlAttributes=function(){var e=this.getAttributes(),i="";if(e.length>0){var i="<div class=\"sapSuiteUiCommonsNetworkGraphDivNodeAttributes\">";e.forEach(function(o){var m=this._convertToStyle({color:this._getAttributeColor(o,a.Type.Label,E.ColorType.Content)},true),v=this._convertToStyle({color:this._getAttributeColor(o,a.Type.Value,E.ColorType.Content)},true);var n=o.getId();var R="<div id=\""+n+"\" class=\"sapSuiteUiCommonsNetworkGraphDivNodeAttributesRow\">";R+="<div class=\"sapSuiteUiCommonsNetworkGraphDivNodeAttributesIcons\">";if(o.getIcon()){R+="<div "+m+" id=\""+n+"-icon\" class=\"sapSuiteUiCommonsNetworkGraphDivNodeText sapSuiteUiCommonsNetworkGraphDivAttributeIcon\">"+this._renderHtmlIcon(o.getIcon())+"</div>";}R+="</div>";R+="<div class=\"sapSuiteUiCommonsNetworkGraphDivNodeLabels\">";R+="<div id=\""+n+"-label\" "+m+" class=\"sapSuiteUiCommonsNetworkGraphDivNodeText\">"+b(o.getLabel())+"</div>";R+="</div>";R+="<div class=\"sapSuiteUiCommonsNetworkGraphDivNodeValues\">";R+="<div id=\""+n+"-value\" "+v+" class=\"sapSuiteUiCommonsNetworkGraphDivNodeText\">"+b(o.getValue())+"</div>";R+="</div>";R+="</div>";i+=R;}.bind(this));i+="</div>";}return i;};N.prototype._showDivActionButtons=function(e){var $=this.$("rightdivbuttons"),m=this.$("leftdivbuttons");if(e&&!this._bActionButtonsRendered){$.html("");m.html("");var n=function(p,t){var u="<div title=\""+p.title+"\"class=\"sapSuiteUiCommonsNetworkGraphDivActionButtonBackground\">";u+="<div class=\"sapSuiteUiCommonsNetworkActionButtonFocusCircle\"></div>";u+="<div class=\"sapSuiteUiCommonsNetworkGraphDivActionButton sapContrast ";if(!p.enable){u+="sapSuiteUiCommonsNetworkGraphDivActionButtonDisabled";}u+="\">";u+=this._renderHtmlIcon(p.icon,("sapContrast "+p.class||""));u+="</div>";u+="</div>";var v=q(u);if(p.enable&&p.click){v.click(p.click);v.click(function(w){if(this.getParent()){this.getParent().setFocus({item:this,button:v[0]});}}.bind(this));}t.append(v);}.bind(this);var B=0,o=0;if(this.getShowExpandButton()){n({"class":"sapSuiteUiCommonsNetworkNodeActionCollapseIcon",icon:this._getExpandIcon(true),enable:this._hasVisibleChildren(),title:r.getText("NETWORK_GRAPH_EXPAND_COLLAPSE"),id:this._getDomId("actionCollapse"),click:this._expandClick.bind(this)},$);B++;}if(this.getShowDetailButton()){n({icon:"sap-icon://menu",enable:this._hasDetailData()||this.getTitle(),id:this._getDomId("actionDetail"),title:r.getText("NETWORK_GRAPH_NODE_DETAILS"),click:function(p){this._detailClick(p.target);}.bind(this)},$);B++;}if(this.getShowActionLinksButton()){n({icon:"sap-icon://chain-link",enable:this._hasActionLinks(),title:r.getText("NETWORK_GRAPH_NODE_LINKS"),id:this._getDomId("actionLinks"),click:function(p){this._linksClick(p.target);}.bind(this)},$);B++;}for(var i=0;(B+o)<(d*2)&&i<this.getActionButtons().length;i++){(function(p){var P=p.getPosition(),t=P===A.Right?B:o;if(t>=d){P=P===A.Left?A.Right:A.Left;}var u=P===A.Right?$:m;n({icon:p.getIcon(),enable:p.getEnabled(),title:p.getTitle(),id:p.getId(),click:function(v){p.firePress({buttonElement:v.target});}},u);})(this.getActionButtons()[i]);}this._bActionButtonsRendered=true;}var F=e?"addClass":"removeClass";this.$().find(".sapSuiteUiCommonsNetworkGraphDivActionButtons")[F](this.VISIBLE_ACTIONS_BUTTONS_CLASS);};N.prototype._renderHtml=function(o){var w=(this._iWidth||this.getWidth()),i=this._getElementId(o.idSufix),m="";if(!w){if(this.getMaxWidth()){m=this.getMaxWidth()+"px";w="";}else{w=f.Box.WIDTH;}}if(w!==""){w+="px";}o.renderManager.write(this._renderHtmlElement("div",{width:w,top:this.getY()?(this.getY()+"px"):"",left:this.getX()?(this.getX()+"px"):"","max-width":m?m:"inherit","min-width":M+"px"},{id:i,"data-sap-ui":i,"class":this._getNodeClass()}));this._processRenderManager(o.renderManager,this.renderContent(o));o.renderManager&&o.renderManager.write("</div>");};N.prototype._replaceId=function($,e){$.removeAttr("data-sap-ui");$.attr("id",$.attr("id")+e);var m=$.children();if(m.length===0){return;}m.each(function(i,o){this._replaceId(q(o),e);}.bind(this));};N.prototype._renderClonedControl=function(o,e){if(o.mapRender){var $=e.$().clone();this._replaceId($,o.idSufix);o.renderManager.write($[0].outerHTML);}else{o.renderManager.renderControl(e);}};N.prototype._renderHtmlContent=function(o){o=o||{};var i=this._getElementId(o.idSufix),e=this._iHeight||this.getHeight()||f.Circle.HEIGHT,m=this._isCircle();var p=function(){var w=this.getContent();if(w){o.renderManager.write("<div id=\""+this.getId()+"-contentwrapper\">");this._renderClonedControl(o,w);o.renderManager.write("</div>");}else{this._processRenderManager(o.renderManager,this.renderItemContent(o));}}.bind(this);if(m){this._iCircleSize=this._iCircleSize||e;var n=this._convertToStyle({width:this._iCircleSize+"px",height:this._iCircleSize+"px"},this._getColorStyle({"border-color":E.ColorType.Border}));var t=this._getColorStyle({"border-color":E.ColorType.Background},true);var B=this._getColorStyle({"border-color":E.ColorType.Border,"background-color":this.getSelected()?E.ColorType.SelectedBackground:""},true);o.renderManager.write("<div id=\""+i+"-wrapperwithbuttons\""+n+" class=\"sapSuiteUiCommonsNetworkGraphDivInnerWrapper\">");o.renderManager.write(this.renderHtmlActionButtons());o.renderManager.write("<div id=\""+i+"-wrapper\""+B+" class=\"sapSuiteUiCommonsNetworkGraphDivInner\">");o.renderManager.write("<div class=\"sapSuiteUiCommonsNetworkDivCircleWrapper\">");o.renderManager.write(this._renderHtmlInfoIcon());o.renderManager.write("<div  id=\""+i+"-focus\" class=\"sapSuiteUiCommonsNetworkDivFocus\">");o.renderManager.write("<div id=\""+i+"-status\""+t+" class=\"sapSuiteUiCommonsNetworkDivCircleStatus\">");this._processRenderManager(o.renderManager,this.renderItemContent(o));o.renderManager.write("</div>");o.renderManager.write("</div>");o.renderManager.write("</div>");o.renderManager.write("</div>");o.renderManager.write("</div>");o.renderManager.write(this._renderHtmlTitleAndDescription());}else{var u=this._getColorStyle({"border-color":E.ColorType.Border,"background-color":this.getSelected()?E.ColorType.SelectedBackground:""});var n=this._convertToStyle({},u);o.renderManager.write(this.renderHtmlActionButtons());o.renderManager.write("<div "+n+" id=\""+i+"-wrapper\" class=\"sapSuiteUiCommonsNetworkGraphDivInner\">");o.renderManager.write("<div id=\""+i+"-focus\" class=\"sapSuiteUiCommonsNetworkDivFocus\"></div>");var t=this._getColorStyle({"background-color":E.ColorType.Background},true);var v=this._getColor(this.getSelected()?E.ColorType.Content:E.ColorType.HeaderContent);o.renderManager.write("<div id=\""+i+"-header\" "+t+" class=\"sapSuiteUiCommonsNetworkGraphDivHeader sapSuiteUiCommonsNetworkGraphDivHeaderColor");if(!this._hasAdditionalContent()){o.renderManager.write(" sapSuiteUiCommonsNetworkGraphDivHeaderOnly");}o.renderManager.write("\">");if(this._showHeaderCheckBox()){this._renderClonedControl(o,this._getHeaderCheckbox());}o.renderManager.write(this._renderHtmlTitleIcon("sapSuiteUiCommonsNetworkGraphDivNodeIconTitle"));o.renderManager.write(this._renderHtmlTitle(v));o.renderManager.write("</div>");p();o.renderManager.write("</div>");o.renderManager.write(this._renderHtmlInfoIcon());}};N.prototype._getHeaderCheckbox=function(){var o=this.getAggregation("_checkBox"),t=this;if(!o){o=new C(this.getId()+"-checkbox").addStyleClass("sapSuiteUiCommonsNetworkGraphHeaderCheckboxInner");o.addEventDelegate({"onAfterRendering":function(){o.$().mousedown(function(e){var n=!o.getSelected();o.setSelected(n);t.fireHeaderCheckBoxPress({checked:n});e.stopPropagation();});}});this.setAggregation("_checkBox",o);}return o;};N.prototype._renderHtmlTitleIcon=function(e){var i=this.getIcon(),o=this.getImage(),m=this._getColorStyle({"color":this._isBox()?E.ColorType.HeaderContent:E.ColorType.Content},true);var n="";e=(e||"")+" sapSuiteUiCommonsNetworkGraphDivNodeTitleText sapSuiteUiCommonsNetworkGraphDivNodeIcon";if(o){var p=this._getImageSize();n=this._renderHtmlElement("img",{width:p.width+"px",height:p.height+"px"},{"src":b(o.getSrc()),"class":"sapSuiteUiCommonsNetworkGraphDivNodeImage"});}else if(i){n="<div "+m+" class=\""+e+"\">"+this._renderHtmlIcon(i)+"</div>";}return n;};N.prototype._renderHtmlBoxContent=function(o){var e="",i=this._hasAdditionalContent(),m=this._getElementId(o.idSufix);if(i){e+="<div id=\""+m+"-additionalwarpper\" class=\"sapSuiteUiCommonsNetworkGraphDivAdditionalContent\">";var n=this._getColor(E.ColorType.Content);e+=this._renderHtmlDescription(n);e+=this._renderHtmlAttributes();e+="</div>";}return e;};N.prototype._renderHtmlCircleContent=function(o){return this._renderHtmlTitleIcon("sapSuiteUiCommonsNetworkGraphDivNodeCircleIcon");};N.prototype._renderSvg=function(o){var i=this._getElementId(o.idSufix);var n=this._renderControl("g",{id:i,"data-sap-ui":i,nodeid:b(this.getKey()),"class":this._getNodeClass()},false);n+=this._renderControl("g",{id:i+"-wrapper","class":"sapSuiteUiCommonsNetworkNodeShape"},false);n+=this._renderContent(o);n+="</g>";n+="</g>";return n;};N.prototype._renderSvgContent=function(o){var n=this._isBox()?this._renderBox(o):this._renderCircle(o);var i=this.getParent()._bIsRtl,x,y;if(this._isCircle()){var e=this._iCircleSize/8,m=this._iCircleSize/5.3;x=i?this._getCirclePosition().x+this._iCircleSize-e:this._getCirclePosition().x+e;y=this.getY()+m;}else{x=this.getX();y=this.getY();}n+=this.renderStatusIcon({x:x-this.getX(),y:y-this.getY()});return n;};N.prototype._renderContent=function(o){return this.renderContent(o);};N.prototype._renderCircleContent=function(){var i=this._iCircleSize,e=this.getParent()._bIsRtl,o=this.getImage(),m,x=this.getX(),y=this.getY(),n="";if(this._displayImage(o)){m=this._getImageSize();n+=this._renderControl("image",{"xlink:href":b(o.getSrc()),x:x+this._iWidth/2-m.width/2,y:y+i/2-m.height/2,width:m.width,height:m.height});}else if(this.getIcon()){n+=this._renderIcon({attributes:{"class":"sapSuiteUiCommonsNetworkGraphIcon sapSuiteUiCommonsNetworkCircleNodeIcon sapSuiteUiCommonsNetworkStatusText",style:(this.getIconSize()?("font-size:"+this.getIconSize()+"px;"):"")+this._getColorStyle({fill:E.ColorType.Content}),x:x+this._iWidth/2,y:y+i/2},icon:this.getIcon(),height:this.getIconSize()?this.getIconSize()-2:22});}if(this.getTitle()){if(!this._aTitleLines||this._aTitleLines.length===1){n+=this._renderClipPath({id:this.getId()+"-title-clip",x:x,y:y+i+f.Title.OFFSET-10,height:f.Title.LINESIZE*2});n+=this._renderTitle({"class":"sapSuiteUiCommonsNetworkNodeTitle sapSuiteUiCommonsNetworkNodeText",x:x+this._iWidth/2,y:y+i+f.Title.OFFSET,title:b(this.getTitle()),maxWidth:this._iWidth-5});}else{n+=this._renderMultilineTitle({x:x+this._iWidth/2,y:y+i+f.Title.OFFSET*2});}}if(this._displayDescription()){n+=this._renderDescription({x:e?x+this._iWidth-f.Title.OFFSET:x+f.Title.OFFSET,y:y+this._getTitleHeight()+i+f.Title.OFFSET*2+f.Title.OFFSET/2});}return n;};N.prototype._renderCircle=function(){var e="",x=this.getX(),y=this.getY(),i=6,F=2,m=this._iCircleSize;e+=this._renderControl("circle",{id:this.getId()+"-innerBox",cx:x+this._iWidth/2,cy:y+m/2,style:this._getColorStyle({stroke:E.ColorType.Border}),r:m/2,"class":"sapSuiteUiCommonsNetworkInnerCircle"});e+=this._renderControl("circle",{id:this.getId()+"-statusCircle",cx:x+this._iWidth/2,cy:y+m/2,style:this._getColorStyle({stroke:E.ColorType.Background}),r:m/2-i,"class":"sapSuiteUiCommonsNetworkInnerCircleStatus"});e+=this._renderControl("circle",{id:this.getId()+"-focusCircle",cx:x+this._iWidth/2,cy:y+m/2,style:this._getColorStyle({stroke:E.ColorType.Focus}),r:m/2-F,"class":"sapSuiteUiCommonsNetworkCircleFocus"});e+=this.renderItemContent();return e;};N.prototype._renderBoxContent=function(o){var e=c/2,t=f.Title.ICON_X_OFFSET,i=this.getParent()._bIsRtl,m=this.getImage(),y=this.getY(),x=this.getX(),n,p=this._getImageSize(),u="";if(this._displayImage(m)){p=this._getImageSize();u+=this._renderControl("image",{"xlink:href":b(m.getSrc()),x:i?x+this._iWidth-f.Title.ICON_X_OFFSET-p.width:x+f.Title.ICON_X_OFFSET,y:y+f.Title.IMAGE_OFFSET_Y,width:p.width,height:p.height});t+=p.width+f.Title.ICON_X_OFFSET;}else if(this.getIcon()){u+=this._renderIcon({attributes:{style:this._getColorStyle({fill:E.ColorType.Content}),"class":"sapSuiteUiCommonsNetworkGraphIcon sapSuiteUiCommonsNetworkNodeTitleIcon sapSuiteUiCommonsNetworkStatusText",x:i?x+this._iWidth-f.Title.ICON_X_OFFSET:x+f.Title.ICON_X_OFFSET,y:y+e},icon:this.getIcon(),height:f.Title.LINESIZE});t+=f.Title.ICON_SIZE+f.Title.ICON_X_OFFSET;}if(this.getTitle()){n=this._iWidth-t-T;if(n>0){if(!this._aTitleLines||this._aTitleLines.length===1){u+=this._renderClipPath({id:this.getId()+"-title-clip",x:x,y:y,height:c});u+=this._renderTitle({"class":"sapSuiteUiCommonsNetworkNodeTitle sapSuiteUiCommonsNetworkNodeText sapSuiteUiCommonsNetworkStatusText",style:this._getColorStyle({fill:E.ColorType.Content}),x:i?x+this._iWidth-t:x+t,y:y+e,maxWidth:n,title:b(this.getTitle())});}else{u+=this._renderMultilineTitle({x:i?x+this._iWidth-t:x+t,y:y+f.Title.OFFSET*2});}}}if(this._displayDescription()){u+=this._renderDescription({x:i?x+this._iWidth-f.Title.OFFSET:x+f.Title.OFFSET-f.Title.OFFSET/3,y:y+this._getTitleHeight()+(this._hasMultiLineTitle()?(f.Title.OFFSET*2+f.Title.OFFSET/2):f.Title.OFFSET*4)});}if(this._displayAttributes()){u+=o.sizeDetermination?this._renderAttributesForSize():this._renderAttributes({y:this.getY()+this._getDescriptionHeight()+this._getTitleHeight()+f.Title.OFFSET+(!this._hasMultiLineTitle()?f.Attributes.OFFSET:0)});}return u;};N.prototype._renderBox=function(o){var T=6,F=4,t=(this._iTitleHeight||this._getTitleHeight())+T,R=3;var y=this.getY(),x=this.getX();var e=this._renderControl("rect",{id:this.getId()+"-innerBox",x:x,y:y,style:this._getColorStyle({stroke:E.ColorType.Border}),"class":"sapSuiteUiCommonsNetworkInnerRect",rx:R,ry:R,width:this._iWidth,height:this._iHeight,"pointer-events":"fill"});var i=this._iHeight===c;e+=this._renderRoundRect({id:this.getId()+"-innerStatusBox",x:x,y:y,style:this._getColorStyle({fill:E.ColorType.Background}),"class":"sapSuiteUiCommonsNetworkNodeBoxStatus",topRight:R,topLeft:R,bottomRight:i?R:0,bottomLeft:i?R:0,width:this._iWidth,height:Math.max(t,c),"pointer-events":"fill"});e+=this._renderControl("rect",{id:this.getId()+"-focusCircle",x:x+F,y:y+F,"class":"sapSuiteUiCommonsNetworkBoxFocus",style:this._getColorStyle({stroke:E.ColorType.Focus}),rx:5,ry:5,width:this._iWidth-F*2,height:this._iHeight-F*2});e+=this.renderItemContent(o);return e;};N.prototype._renderInfoIcon=function(x,y,i,F){var e=this.getStatusIcon(),m=e?"sapSuiteUiCommonsNetworkNodeInfoWrapperCustomIcon":"",n="<g id=\""+this.getId()+"-statusiconwrapper"+"\" class=\"sapSuiteUiCommonsNetworkNodeInfoWrapper "+m+"\">";n+=this._renderControl("circle",{"class":"sapSuiteUiCommonsNetworkNodeInfoBox",cx:x,cy:y,r:i||f.Title.INFO_BOX_SIZE/2},false);n+="<title>"+r.getText("NETWORK_GRAPH_COLLAPSED")+"</title>";n+="</circle>";n+=this._renderIcon({attributes:{id:this.getId()+"-statusicon","class":"sapSuiteUiCommonsNetworkNodeInfoIcon sapSuiteUiCommonsNetworkGraphIcon",x:x+f.Title.INFO_BOX_SIZE/2-10,y:y,style:F?("font-size:"+F):""},icon:e||"sap-icon://notification",height:f.Title.INFO_BOX_SIZE/2+2.5});n+="</g>";return n;};N.prototype._getNodeClass=function(){var e=this.getSelected()?this.SELECT_CLASS:"",i=this._hasCustomStatus()?" sapSuiteUiCommonsNetworkNodeCustomStatus ":"",m="";if(this.aCustomStyleClasses){m=this.aCustomStyleClasses.join(" ");}return(this.getParent()._isUseNodeHtml()?"sapSuiteUiCommonsNetworkGraphDivNode ":"sapSuiteUiCommonsNetworkNode ")+e+i+(this._isBox()?" sapSuiteUiCommonsNetworkBox ":" sapSuiteUiCommonsNetworkNodeCircle ")+this._getStatusClass()+m;};N.prototype._renderAttributesForSize=function(){var L="",v="";this.getVisibleAttributes().forEach(function(i){L+=this._renderText({attributes:{"class":"sapSuiteUiCommonsNetworkGraphAttribute",x:this.getX(),y:this.getY()},text:i.getLabel()});v+=this._renderText({attributes:{"class":"sapSuiteUiCommonsNetworkGraphAttribute",x:this.getX(),y:this.getY()},text:i.getValue()});},this);L="<g id=\""+this.getId()+"-attrLabel\">"+L+"</g>";v="<g id=\""+this.getId()+"-attrValue\">"+v+"</g>";return L+v;};N.prototype._getAttributeColor=function(i,e,t){var m=e+"Status",o=i["get"+m]()||this.getStatus();return this._getColor(t,o);};N.prototype._getAttributeColorString=function(i,e,t){var m=this._getAttributeColor(i,e,t);return m?"fill:"+m:"";};N.prototype._renderAttributes=function(p){p=p||{};var P=2,B=6,e=12;var m=this.getParent()._bIsRtl,L=m?this.getX()+this._iWidth-B:this.getX()+B,n=this._iLabelAttrWidth?this._iLabelAttrWidth:this._iWidth/2-e,v=m?L-n-e:L+n+e,V=m?v-this.getX()-B:(this.getX()+this._iWidth)-v-B;var o=this._renderControl("g",{"clip-path":"url(#"+this.getId()+"-clip-attr-value)",id:this.getId()+"-attrValue"},false),t=this._renderControl("g",{"clip-path":"url(#"+this.getId()+"-clip-attr-label)",id:this.getId()+"-attrLabel"},false),u=p.y,w=this._renderClipPath({id:this.getId()+"-clip-attr-label",x:m?L-n-B+P:L-P,y:u,width:P*2+(m?n+B:n)});w+=this._renderClipPath({id:this.getId()+"-clip-attr-value",x:m?this.getX()+B+P:v-P,y:u,width:P*2+(m?V+B:V)});this.getVisibleAttributes().forEach(function(x,i){var y=u+f.Attributes.LINE*(i+1);t+=this._renderText({attributes:{style:this._getAttributeColorString(x,a.Type.Label,E.ColorType.Content),"class":"sapSuiteUiCommonsNetworkGraphAttribute sapSuiteUiCommonsNetworkStatusText",x:L,id:x.getId()+"-label",y:y},text:x.getLabel()});o+=this._renderText({attributes:{style:this._getAttributeColorString(x,a.Type.Value,E.ColorType.Content),"class":"sapSuiteUiCommonsNetworkGraphAttribute sapSuiteUiCommonsNetworkGraphAttributeValue sapSuiteUiCommonsNetworkStatusText",x:v,y:y,id:x.getId()+"-value"},text:x.getValue()});},this);o+="</g>";t+="</g>";return w+t+o;};N.prototype._detailClick=function(o){o=o||this;this.getParent()._tooltip.openDetail({item:this,opener:o});};N.prototype._linksClick=function(o){o=o||this;this.getParent()._tooltip.openLink({item:this,opener:o});};N.prototype._expandClick=function(){var e=this.fireEvent("collapseExpand",{},true);if(e){this.setCollapsed(this._oExpandState!==g.COLLAPSED);}};N.prototype._setupMaxWidth=function(){var m=this.getMaxWidth();if(m){this._iWidth=m;}};N.prototype._setTextHeight=function($,m){if($[0]&&m>0){var e=this.$().find(".sapSuiteUiCommonsNetworkGraphDivNodeIcon.sapSuiteUiCommonsNetworkGraphDivNodeIconTitle");e.hide();var i=$.height();$.css("white-space","nowrap");var n=$.height();$.height(Math.min(i,m*n));$.css("white-space","");e.show();}};N.prototype._applyMaxWidth=function(){var O=30,T=10;var n,$,e,v=0,L=0,i=0,m,o=this.getMaxWidth();if(this._oGroup&&this._oGroup.getCollapsed()){return;}if(!this.getWidth()&&this.getMaxWidth()){$=this.$("attrLabel");e=this.$("attrValue");if($[0]){L=$[0].getBBox().width;}if(e[0]){v=e[0].getBBox().width;}i=v+L+O;n=Math.max(this.$()[0].getBBox().width+T,i);this._iWidth=Math.max(Math.min(n,o),80);if((v&&L)){m=Math.max(L,v);if(m*2+O/2<this._iWidth){return;}if(i>this._iWidth){if(v<o/2){this._iLabelAttrWidth=this._iWidth-v-O;}if(L<this._iWidth/2){this._iLabelAttrWidth=L+O/4;}}else{this._iLabelAttrWidth=this._iWidth-v-O;}}}};N.prototype._resetDimensions=function(){this._iWidth=0;this._iHeight=0;this._iCircleSize=0;this._iTitleHeight=0;};N.prototype._setupDivDimensions=function(){var $=this.$();this._iWidth=$.width();this._iHeight=$.height();};N.prototype._setupWidthAndHeight=function(R){var t=this._isBox()?"Box":"Circle",i=this._getTitleHeight(),e=this.getTitle()||this._hasDetailData()?f.Title.LINESIZE:0,m=this._getDescriptionHeight();m=m?m+5:0;var G=function(){var o=this._iHeight||this.getHeight();if(this._isBox()&&!o){o=m+(this._hasMultiLineTitle()?i+f.Title.OFFSET:Math.max(i+e,f.Box.HEIGHT));if(this._displayAttributes()){o+=this.getVisibleAttributes().length*f.Attributes.LINE+f.Attributes.OFFSET;}}if(this._isCircle()&&!this._iHeight){o=o?o:f[t].HEIGHT;this._iCircleSize=o;o+=i+m;}return Math.max(o,30);}.bind(this);var n=function(){var w=Math.max(this._iWidth||this.getWidth()||f[t].WIDTH,30);if(this._isCircle()&&w<this._iCircleSize){w=this._iCircleSize;}return w;}.bind(this);this._iHeight=G();this._iWidth=n();};N.prototype._getTitleHeight=function(){var i=0,o=this._getImageSize();if(this._hasMultiLineTitle()){i=(((this.getTitleLineSize()>0)?Math.min(this._aTitleLines.length,this.getTitleLineSize()):this._aTitleLines.length))*f.Title.LINESIZE;}else{i=(this._isBox()||this.getTitle())?f.Title.LINESIZE:0;}return Math.max(o.height,i);};N.prototype._getDescriptionHeight=function(){var m=this.getDescriptionLineSize();if(m===-1||!this._aDescriptionLines||!this.getDescription()){return 0;}return(m>0?Math.min(m,this._aDescriptionLines.length):this._aDescriptionLines.length)*f.Description.LINESIZE;};N.prototype._setupEvents=function(){var $=this.$("wrapper");$.unbind("mousedown");$.unbind("mouseover");$.unbind("mouseout");$.mousedown(function(e){this._mouseDown(e.ctrlKey);e.preventDefault();}.bind(this));$.mouseover(function(e){this._mouseOver();}.bind(this));$.mouseout(function(e){this._mouseOut();}.bind(this));};N.prototype._mouseOut=function(){this.$().removeClass(this.HIGHLIGHT_CLASS);if(!this.getSelected()){this._setStatusColors("");}};N.prototype._mouseOver=function(){var e=this.fireEvent("hover",{},true);if(e){if(!this.getSelected()){this._setStatusColors("Hover");}this.$().addClass(this.HIGHLIGHT_CLASS);}};N.prototype._mouseDown=function(i){var e=this.fireEvent("press",{},true);this.getParent()._selectNode({element:this,forceFocus:true,renderActionButtons:e&&!this.getSelected(),preventDeselect:i});if(!this.getSelected()){this.$().addClass(this.HIGHLIGHT_CLASS);this._setStatusColors("Hover");}};N.prototype._deselect=function(){var $=this.$("innerBox");$.css("stroke",this._getColor(E.ColorType.Border));$.css("fill",this._getColor(E.ColorType.Background));};N.prototype._getExpandIcon=function(R){switch(this._oExpandState){case g.PARTIAL:return R?h.PARTIAL:k;case g.EXPANDED:return R?h.COLLAPSE:j;case g.COLLAPSED:return R?h.EXPAND:s;default:return R?h.EXPAND:s;}};N.prototype._createLineText=function(t,w,o,m){var L=[[]],i=0,R,W,e,n,p,u,v=this._createElement("tspan");if(!t||w<0){return L;}n=t.split(/\s+/).reverse();o.appendChild(v);while(n.length>0){W=n.pop();if(W){e=L[i];e.push(W);v.textContent=L[i].join(" ");if(v.getComputedTextLength()>w){if(e.length>1&&m!==1){n.push(e.pop());}if(e.length===1){u=this._createText(o,{text:e[0],width:w,dots:false});if(u){p=v.textContent;e.pop();e.push(p);R=W.substring(p.length);n.push(R);}}i++;if(m>0&&i>=m){break;}L[i]=[];}}}if(m>0&&n.length>0){L[L.length-1].push("...");}if(L.length>0){u=this._createText(o,{text:L[L.length-1].join(" "),width:w,dots:true});if(u){L[m-1]=[v.textContent];}}return L;};N.prototype._createDescription=function(){var t,w=this._iWidth-f.Title.OFFSET,$=this.$();if(this._displayDescription()&&$[0]){t=this._createElement("text");t.setAttribute("class","sapSuiteUiCommonsNetworkNodeDescription");$[0].appendChild(t);this._aDescriptionLines=this._createLineText(this.getDescription(),w,t,this.getDescriptionLineSize());}};N.prototype._createMultilineTitle=function(){var G=function(){if(this._isBox()){if(this._displayImage()){return this._iWidth-this._getImageSize().width-f.Title.ICON_X_OFFSET*2;}if(this.getIcon()){return this._iWidth-f.Title.ICON_SIZE-f.Title.ICON_X_OFFSET*2;}return this._iWidth-f.Title.OFFSET*2;}return this._iWidth;}.bind(this);var t,w=G(),$=this.$();if(this.getTitleLineSize()!==1&&$[0]&&w>0){t=this._createElement("text");t.setAttribute("class","sapSuiteUiCommonsNetworkNodeTitle sapSuiteUiCommonsNetworkNodeMultipleLineTitle");$[0].appendChild(t);this._aTitleLines=this._createLineText(this.getTitle(),w,t,this.getTitleLineSize());}};N.prototype.getFocusDomRef=function(){return this.getDomRef("wrapper");};N.prototype._renderMultilineText=function(m){var e="",u=this._isBox()&&m.useCustomstyle;if(!m.lines){return"";}for(var i=0;i<m.lines.length;i++){e+=this._renderText({attributes:{style:u?this._getColorStyle({fill:E.ColorType.Content}):"","class":m.class+(u?" sapSuiteUiCommonsNetworkStatusText ":""),x:m.x,y:m.y+(i*m.lineSize)},close:false});e+=m.lines[i].join(" ");e+="</text>";}return e;};N.prototype._renderDescription=function(m){m.class=" sapSuiteUiCommonsNetworkNodeTitle sapSuiteUiCommonsNetworkNodeMultipleLineTitle";return this._renderMultilineText({lines:this._aDescriptionLines,maxLineSize:this.getDescriptionLineSize(),lineSize:f.Description.LINESIZE,"class":" sapSuiteUiCommonsNetworkNodeDescription ",x:m.x,y:m.y});};N.prototype._renderMultilineTitle=function(m){return this._renderMultilineText({useCustomStyle:true,lines:this._aTitleLines,maxLineSize:this.getTitleLineSize(),lineSize:f.Title.LINESIZE,"class":" sapSuiteUiCommonsNetworkNodeTitle sapSuiteUiCommonsNetworkNodeMultipleLineTitle",x:m.x,y:m.y,trim:this._aTitleLines.length>this.getTitleLineSize()&&this.getTitleLineSize()!==0});};N.prototype._processHideShowParents=function(e,R,o){var i=this._oGroup&&this._oGroup.getCollapsed();var m=function(n){if(n._bIsHidden){return;}var p=false,t;if(n.getKey()!==R){if(n.aChildren.length>0){t=n.aChildren[0]._bIsHidden;n.aChildren.forEach(function(u){if(t!==u._bIsHidden){p=true;}});n._oExpandState=p?g.PARTIAL:t?g.COLLAPSED:g.EXPANDED;if(n._oExpandState===g.COLLAPSED){n.$().addClass("sapSuiteUiCommonsNetworkNodeCollapsed");}else{n.$().removeClass("sapSuiteUiCommonsNetworkNodeCollapsed");}if(n._oExpandState===g.PARTIAL){n.$().addClass("sapSuiteUiCommonsNetworkNodePartialCollapsed");}else{n.$().removeClass("sapSuiteUiCommonsNetworkNodePartialCollapsed");}}}};m(this);this.aParents.forEach(function(n){if(!o[n.getKey()]){m(n);}});if(i){if(this._oGroup._bNeedParentProcessing){this._oGroup.aNodes.forEach(function(G){G.aParents.forEach(function(p){if(!o[p.getKey()]){m(p);}});});this._oGroup._bNeedParentProcessing=false;}}};N.prototype._getAllChildren=function(e,R,o){var i=function(K){if(!o[K]){o[K]=this;return true;}return false;}.bind(this);if(R===this.getKey()){return;}if(this._bIsHidden===e){return;}if(!i(this.getKey())){return;}if(this._oGroup&&this._oGroup.getCollapsed()){this._oGroup.aNodes.forEach(function(n){n._getAllChildren(e,R,o);});}if(this._oExpandState!==g.COLLAPSED){this.aChildren.forEach(function(n){n._getAllChildren(e,R,o);});}};N.prototype._hideShow=function(e){var F=e?"hide":"show",i;this._bIsHidden=e;this.aLines.forEach(function(L){L._hideShow(e);});this.aParentLines.forEach(function(L){L._hideShow(e);});if(this._oGroup&&!this._oGroup._bIsSwimLane){if(this._oGroup.getCollapsed()){this._oGroup._hideShow(e);}else{i=this._oGroup._hasVisibleNodes();if((i&&!e)||(!i&&e)){this._oGroup.$()[F]();this._oGroup._bIsHidden=e;}}}if(this._isInCollapsedGroup()&&this._isHtml()){return;}if(this.$()){this.$()[F]();}};N.prototype._setActionButtonFocus=function(i,F){this.$().removeClass(this.FOCUS_CLASS);this.$().find("."+this.FOCUS_CLASS).removeClass(this.FOCUS_CLASS);var e=F?"addClass":"removeClass";q(i)[e](this.FOCUS_CLASS);};N.prototype._getActionButtonTitle=function(i){var F=q(i).find("title")[0];return r.getText("NETWORK_GRAPH_ACCESSIBILITY_ACTION_BUTTON")+(F?" "+F.textContent:"");};N.prototype._getAccessibilityLabel=function(){var L=r.getText("NETWORK_GRAPH_NODE")+" "+this.getTitle();if(this._isBox()){this.getVisibleAttributes().forEach(function(o){L+=" "+o.getLabel()+" "+o.getValue();});}return L;};N.prototype._setStatusColors=function(t){var e=function(x,y){if(y&&x){var z=this._getColor(E.ColorType[t+"Content"],y),F=u?"color":"fill";q(x).css(F,z||i);}}.bind(this);var u=this.getParent()._isUseNodeHtml();if(this._hasCustomStatus()){var i=this._getColor(E.ColorType[t+"Content"]),B=this._getColor(E.ColorType[t+"Background"]),m=this._getColor(E.ColorType[t+"Border"]);var n=(t==="Selected"||t==="Hover");if(!u){var $=this.$("innerBox"),o=p?this.$("statusCircle"):this.$("innerStatusBox"),p=this._isCircle();o.css(p?"stroke":"fill",n?"none":B);$.css("fill",n?B:"");$.css("stroke",m);this.$().find(".sapSuiteUiCommonsNetworkStatusText").css("fill",i);this.$("focusCircle").css("stroke",this._getColor(E.ColorType[t+"Focus"]));}else{var v=this.$("wrapper"),w=this.$().find(".sapSuiteUiCommonsNetworkGraphDivNodeTitleText");v.css("border-color",m);if(this._isBox()){this.$().find(".sapSuiteUiCommonsNetworkGraphDivNodeText").css("color",i);this.$("header").css("background-color",n&&!B?"":B);w.css("color",n?i:this._getColor(E.ColorType.HeaderContent));v.css("background-color",n&&B?B:"");}else{this.$("status").css("border-color",B);v.css("background-color",n&&B?B:"");this.$().find(".sapSuiteUiCommonsNetworkGraphDivNodeCircleIcon").css("color",i);}}}this.getAttributes().forEach(function(x){if(x&&x.getVisible()){var L=x.getLabelStatus(),V=x.getValueStatus();if(L){e(x.$("icon"),L);e(x.$("label"),L);}if(V){e(x.$("value"),V);}}});};N.prototype.computeTextDimensions=function(m){var o=this.getDomRef(),t,i,n;if(o){t=this._createElement("text",m.attributes);o.appendChild(t);try{i=this._createLineText(m.text,m.width,t,m.maxLines);n=t.getBBox().height;}catch(e){}q(t).detach();return{text:i,lineHeight:n};}};N.prototype.renderText=function(m){var e=16;var n="",L=m.lines;if(!L){if(m.text){L=[m.text.split(" ")];}else{return"";}}for(var i=0;i<L.length;i++){n+=this._renderText({attributes:Object.assign({x:m.x+this.getX(),y:this.getY()+m.y+(i*(m.lineSize||e))},m.attributes),close:false});n+=L[i].join(" ");n+="</text>";}return n;};N.prototype.renderIcon=function(m){m.attributes=m.attributes||{};Object.assign(m.attributes,{"font-family":"SAP-icons"});m.attributes.x=this.getX()+(m.x||0);m.attributes.y=this.getY()+(m.y||0);return this._renderIcon({attributes:m.attributes,icon:m.icon});};N.prototype.renderHtmlIcon=function(i){return this._renderHtmlIcon(i,"sapSuiteUiCommonsNetworkGraphDivNodeIcon");};N.prototype.renderHtmlActionButtons=function(){var R=this.getId()+"-rightdivbuttons",L=this.getId()+"-leftdivbuttons";var e="<div id=\""+R+"\" class=\"sapSuiteUiCommonsNetworkGraphDivActionButtons sapSuiteUiCommonsNetworkGraphDivActionButtonsRight\"></div>",i="<div id=\""+L+"\" class=\"sapSuiteUiCommonsNetworkGraphDivActionButtons sapSuiteUiCommonsNetworkGraphDivActionButtonsLeft\"></div>";return i+e;};N.prototype.renderHtmlInfoIcon=function(o){return this._renderHtmlInfoIcon(o);};N.prototype.renderContent=function(o){return this._isHtml()?this._renderHtmlContent(o):this._renderSvgContent(o);};N.prototype.renderItemContent=function(o){if(this._isHtml()){return this._isBox()?this._renderHtmlBoxContent(o):this._renderHtmlCircleContent(o);}return this._isBox()?this._renderBoxContent(o):this._renderCircleContent(o);};N.prototype.calculateSizes=function(){this._setupMaxWidth();this._createMultilineTitle();this._createDescription();this._resetDimensions();this._applyMaxWidth();};N.prototype.renderElement=function(n,m,e){return this._renderControl(n,m,e);};N.prototype.renderStatusIcon=function(p){return this._renderInfoIcon(this.getX()+p.x,this.getY()+p.y,p.size,p.iconSize);};N.prototype.setSize=function(m){if(m){if(m.width){this._iWidth=m.width;}if(m.height){this._iHeight=m.height;}if(m.titleHeight){this._iTitleHeight=m.titleHeight;}}};N.prototype.hasVisibleActionButtons=function(){return this.$("actionButtons").hasClass(this.VISIBLE_ACTIONS_BUTTONS_CLASS)||this.$().find(".sapSuiteUiCommonsNetworkGraphDivActionButtons").hasClass(this.VISIBLE_ACTIONS_BUTTONS_CLASS);};N.prototype.getEnabledActionButtons=function(){return this.$().find(".sapSuiteUiCommonsNetworkNodeActionButton, .sapSuiteUiCommonsNetworkGraphDivActionButton:not(.sapSuiteUiCommonsNetworkGraphDivActionButtonDisabled)").parent().toArray();};N.prototype.showActionButtons=function(e){var R,m,t=this,B=0,n=0,o=this.getParent()._bIsRtl,w,p,u,v,x,y,L;if(this._isHtml()){this._showDivActionButtons(e);return;}var z=function(){var u=this.getParent()._bIsRtl?-f.ActionButtons.RADIUS-f.ActionButtons.MARGIN:f.ActionButtons.RADIUS+f.ActionButtons.MARGIN,x=f.ActionButtons.RADIUS,P=[[u,x]];for(var i=1;i<R;i++){P.push([u,x+f.ActionButtons.RADIUS*2*i+f.ActionButtons.OFFSET*i]);}return P;}.bind(this);var G=function(){var K=this.getActionButtons().length;if(this.getShowExpandButton()){K++;}if(this.getShowDetailButton()){K++;}if(this.getShowActionLinksButton()){K++;}return K;}.bind(this);var F=function(K){var O=13,P=2,Q=K.position&&K.position===A.Left,U=(Q&&!o)||(!Q&&o);K.x=K.x+(U?v:u);var V={cx:K.x,cy:K.y,id:K.id+"-circle","class":"sapSuiteUiCommonsNetworkNodeActionButton",r:f.ActionButtons.RADIUS},W={"class":"sapSuiteUiCommonsNetworkGraphIcon sapSuiteUiCommonsNetworkNodeActionIcon "+(K.class?K.class:""),x:K.x,y:K.y},X,Y,Z,$,_,a1;if(!K.enable){V.class="sapSuiteUiCommonsNetworkNodeActionButtonDisabledBackground";w.appendChild(this._createElement("circle",V));V.class="sapSuiteUiCommonsNetworkNodeActionButtonDisabled";W.class+=" sapSuiteUiCommonsNetworkNodeActionButtonDisabled";}_=this._createElement("g",{id:K.id});X=this._createElement("circle",{id:K.id+"-circle",cx:K.x,cy:K.y,r:f.ActionButtons.RADIUS-P,"class":"sapSuiteUiCommonsNetworkActionButtonFocusCircle"});Z=this._createElement("circle",V);$=this._createIcon(W,K.icon,O);if(K.title){Y=this._createElement("title");Y.textContent=K.title;Z.appendChild(Y);}_.appendChild(Z);_.appendChild($);_.appendChild(X);w.appendChild(_);a1=q(Z);if(K.enable){a1.click(function(){this._setActionButtonFocus(_,true);this._setFocus(false);if(this.getParent()){this.getParent().setFocus({item:this,button:_});}}.bind(this));q(Z).click(K.click);}Q?n++:B++;return{icon:$,wrapper:Z};}.bind(this);R=G();m=z();if(R===0){return;}if(e&&!this._bActionButtonsRendered){x=this.getY();if(this._isCircle()){u=this.getX()+(this._iWidth/2+this._iCircleSize/2);v=this.getX()+(this._iWidth/2-this._iCircleSize/2);}else{u=this.getX()+this._iWidth;v=this.getX();}var w=this.$("actionButtons")[0];if(!w){w=this._createElement("g",{"class":"sapSuiteUiCommonsNetworkNodeActionButtonWrapper",id:this._getDomId("actionButtons")});}else{q(w).children().remove();}if(this.getParent()._isUseNodeHtml()){this.getParent().$("actiionbuttons")[0].appendChild(w);}else{this.$()[0].appendChild(w);}if(this.getShowExpandButton()){p=F({x:m[B][0],y:x+m[B][1],icon:this._getExpandIcon(true),"class":"sapSuiteUiCommonsNetworkNodeActionCollapseIcon",enable:this._hasVisibleChildren(),title:r.getText("NETWORK_GRAPH_EXPAND_COLLAPSE"),id:this._getDomId("actionCollapse"),click:this._expandClick.bind(this)});this._expandIcon=p.icon;}if(this.getShowDetailButton()){y=F({x:m[B][0],y:x+m[B][1],icon:"sap-icon://menu",enable:this._hasDetailData()||this.getTitle(),id:this._getDomId("actionDetail"),title:r.getText("NETWORK_GRAPH_NODE_DETAILS"),click:function(){this._detailClick(y.wrapper);}.bind(this)});}if(this.getShowActionLinksButton()){L=F({x:m[B][0],y:x+m[B][1],icon:"sap-icon://chain-link",enable:this._hasActionLinks(),title:r.getText("NETWORK_GRAPH_NODE_LINKS"),id:this._getDomId("actionLinks"),click:function(){this._linksClick(L.wrapper);}.bind(this)});}for(var i=0;(B+n)<(d*2)&&i<this.getActionButtons().length;i++){(function(K){var P=K.getPosition(),O=P===A.Right?B:n;if(O>=d){P=P===A.Left?A.Right:A.Left;O=P===A.Right?B:n;}var Q=F({x:m[O][0],y:x+m[O][1],icon:K.getIcon(),title:K.getTitle(),id:K.getId(),click:function(U){K.firePress({buttonElement:Q.wrapper});},enable:K.getEnabled(),position:P});})(this.getActionButtons()[i]);}this._bActionButtonsRendered=true;}else if(this._expandIcon){this._expandIcon.textContent=t._getExpandIcon();this.$().find("."+this.FOCUS_CLASS).removeClass(this.FOCUS_CLASS);}var J=e?"addClass":"removeClass";this.$("actionButtons")[J](this.VISIBLE_ACTIONS_BUTTONS_CLASS);};N.prototype.getChildNodes=function(){this._checkForProcessData();return this.aChildren;};N.prototype.getChildLines=function(){this._checkForProcessData();return this.aLines;};N.prototype.getParentNodes=function(){this._checkForProcessData();return this.aParents;};N.prototype.getParentLines=function(){this._checkForProcessData();return this.aParentLines;};N.prototype.isHidden=function(){return this._bIsHidden;};N.prototype.setHidden=function(v){var t=this;var p=function(L){L.forEach(function(o){var e=o.getFromNode()===t?o.getToNode():o.getFromNode();o.setHidden(v||e.isHidden());});};p(this.getChildLines());p(this.getParentLines());this.$()[v?"hide":"show"]();this._bIsHidden=v;if(this._oGroup){this._oGroup.setHidden(!this._oGroup._hasVisibleNodes());}};N.prototype.getCenterPosition=function(){var o,e;if(this._isBox()){return{x:this.getX()+this._iWidth/2,y:this.getY()+this._iHeight/2};}o=this._getCirclePosition();e=this._getCircleSize()/2;return{x:o.x+e,y:o.y+e};};N.prototype.setHeaderCheckBoxState=function(v){if(v!==H.Hidden){this._getHeaderCheckbox().setSelected(v===H.Checked);this._getHeaderCheckbox().setVisible(true);}else if(this.getAggregation("_checkBox")){this._getHeaderCheckbox().setVisible(false);}this.setProperty("headerCheckBoxState",v);};N.prototype.setX=function(x){this.setProperty("x",x,true);return this;};N.prototype.setY=function(y){this.setProperty("y",y,true);return this;};N.prototype.setSelected=function(e){var p=this.getParent(),F=e?"addClass":"removeClass",K=this.getKey();this.setProperty("selected",e,true);this._setStatusColors(e?"Selected":"");this.$()[F](this.SELECT_CLASS);if(p){if(e){p._mSelectedNodes[K]=this;}else{delete p._mSelectedNodes[K];}}return this;};N.prototype.setCollapsed=function(e){var o={},i,p,F=e?"addClass":"removeClass",$=this.$().find(".sapSuiteUiCommonsNetworkGraphDivActionButtons, .sapSuiteUiCommonsNetworkNodeActionButtonWrapper").find(".sapSuiteUiCommonsNetworkNodeActionCollapseIcon");this.setProperty("collapsed",e,true);this._oExpandState=e?g.COLLAPSED:g.EXPANDED;this.aChildren.forEach(function(n){n._getAllChildren(e,this.getKey(),o);},this);i=Object.keys(o);i.forEach(function(K){o[K]._hideShow(e,this.getKey());},this);i.forEach(function(K){o[K]._processHideShowParents(e,this.getKey(),o);},this);this.aLines.forEach(function(L){L._hideShow(e);});if($[0]){$[0].textContent=this._getExpandIcon();}this.$().removeClass("sapSuiteUiCommonsNetworkNodePartialCollapsed");this.$()[F]("sapSuiteUiCommonsNetworkNodeCollapsed");p=this.getParent();if(p){p._setupKeyboardNavigation();if(e&&!(p.getFocus()&&p.getFocus().item===this)){p.setFocus({item:this});}}return this;};N.prototype.setGroup=function(G){this.setProperty("group",G,true);this._invalidateParent();return this;};N.prototype.setShape=function(e){this.setProperty("shape",e,true);this._invalidateParent();return this;};N.prototype.setWidth=function(w){this.setProperty("width",w,true);this._iWidth=0;this._invalidateParent();return this;};N.prototype.setHeight=function(i){this.setProperty("height",i,true);this._iHeight=0;this._invalidateParent();return this;};N.prototype.setMaxWidth=function(m){this.setProperty("maxWidth",m,true);this._invalidateParent();return this;};N.prototype.setTitleLineSize=function(t){this.setProperty("titleLineSize",t,true);this._invalidateParent();return this;};N.prototype.addAttribute=function(){E.prototype.addAttribute.apply(this,arguments);this._invalidateParent();return this;};N.prototype.insertAttribute=function(){E.prototype.insertAttribute.apply(this,arguments);this._invalidateParent();return this;};N.prototype.removeAllAttributes=function(){E.prototype.removeAllAttributes.apply(this,arguments);this._invalidateParent();return this;};N.prototype.removeAttribute=function(){E.prototype.removeAttribute.apply(this,arguments);this._invalidateParent();return this;};N.prototype.addAttribute=function(){E.prototype.addAttribute.apply(this,arguments);this._invalidateParent();};N.prototype.insertAttribute=function(){E.prototype.insertAttribute.apply(this,arguments);this._invalidateParent();};N.prototype.removeAllAttributes=function(){E.prototype.removeAllAttributes.apply(this,arguments);this._invalidateParent();};N.prototype.removeAttribute=function(){E.prototype.removeAttribute.apply(this,arguments);this._invalidateParent();};N.prototype._processRenderManager=function(R,e){if(R&&e){R.write(e);}};N.prototype._hasAdditionalContent=function(){return this._displayAttributes()||this._displayDescription()||this.getContent();};N.hasNativeLineClamp=typeof document.documentElement.style.webkitLineClamp!="undefined"&&D.browser.chrome;N.prototype._invalidateParent=function(){var p=this.getParent();if(p){p.invalidate();}};N.prototype._isIgnored=function(){var p=this.getParent(),e=p&&p._isSwimLane(),i=this._isInCollapsedGroup();if(e&&this._isHtml()){i=false;}return i||this._isInIgnoredGroup()||!this._useInLayout();};N.prototype._getImageSize=function(){var R=function(w,e){return{width:w?parseInt(w,10):0,height:e?parseInt(e,10):0};};var t=this._isBox()?"Box":"Circle",i=this.getImage();if(!this._displayImage(i)){return R();}return R(i.getWidth()?i.getWidth():f.Image[t],i.getHeight()?i.getHeight():f.Image[t]);};N.prototype._displayImage=function(i){i=i||this.getImage();return i&&i.getSrc();};N.prototype._isHtml=function(){return this.getParent()&&this.getParent()._isUseNodeHtml();};N.prototype._isInCollapsedGroup=function(){return this._oGroup&&this._oGroup.getCollapsed();};N.prototype._isInIgnoredGroup=function(){return this._oGroup&&this._oGroup._isIgnored();};N.prototype._displayAttributes=function(){return this.getVisibleAttributes().length!==0&&this._isBox();};N.prototype._displayDescription=function(){return this.getDescriptionLineSize()!==-1&&this.getDescription();};N.prototype._hasTitle=function(){return this.getTitle()||this.getIcon();};N.prototype._isBox=function(){return this.getShape()===S.Box&&this.getParent()._isLayered();};N.prototype._isCircle=function(){return this.getShape()===S.Circle;};N.prototype._isCustom=function(){return this.getShape()===S.Custom;};N.prototype._hasChildren=function(){return this.aChildren.length>0;};N.prototype._showHeaderCheckBox=function(){return this.getHeaderCheckBoxState()!==H.Hidden&&this._isBox();};N.prototype._hasVisibleChildren=function(){return this.aChildren.some(function(n){return!(n._oGroup&&!n._oGroup.getVisible())&&n.getVisible();});};N.prototype._hasDetailData=function(){return this.getDescription()||this.getAttributes().length>0;};N.prototype._hasActionLinks=function(){return this.getActionLinks().some(function(L){return L.getVisible();});};N.prototype._useAutomaticSize=function(){return!this.getWidth()&&this.getMaxWidth()>0;};N.prototype._getShapeSize=function(e){if(this._isCircle()){return this._getCircleSize();}var i=this._isCustom()?this.getCoreNodeSize():0;return i||(e?this._iWidth:this._iHeight);};N.prototype._getCircleSize=function(){return this._isBox()?undefined:this._iCircleSize;};N.prototype._hasMultiLineTitle=function(){return this._aTitleLines&&this._aTitleLines.length>1;};N.prototype._getCirclePosition=function(){return this._isBox()?undefined:{x:this.getX()+(this._iWidth-this._getCircleSize())/2,y:this.getY()};};N.prototype.getFocusDomRef=function(){return this.getDomRef("wrapper");};N.prototype.setStatusIcon=function(i){var e=this.$("statusicon")[0],o=I.getIconInfo(i),m=o&&o.content;this.$("statusiconwrapper")[i?"addClass":"removeClass"]("sapSuiteUiCommonsNetworkNodeInfoWrapperCustomIcon");e&&(e.textContent=m);this.setProperty("statusIcon",i,true);};return N;});
