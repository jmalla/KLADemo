/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/thirdparty/jquery","sap/suite/ui/commons/library","./SvgBase","sap/ui/base/ManagedObject","sap/ui/core/theming/Parameters","sap/m/ValueCSSColor"],function(q,l,S,M,P,V){"use strict";var a=l.networkgraph.ElementStatus;var E=S.extend("sap.suite.ui.commons.networkgraph.ElementBase",{metadata:{properties:{title:{type:"string",group:"Misc",defaultValue:null},description:{type:"string",group:"Misc",defaultValue:null},status:{type:"string",group:"Appearance",defaultValue:a.Standard}},aggregations:{attributes:{type:"sap.suite.ui.commons.networkgraph.ElementAttribute",multiple:true,singularName:"attribute"}}},renderer:{}});E.prototype.scrollToElement=function(){var p=this.getParent();if(p){p._scrollToElement(this);}};E.prototype._afterRenderingBase=function(){var p=this.getParent(),$,s;var i=p&&p._isUseNodeHtml()&&this.isA("sap.suite.ui.commons.networkgraph.Node");if(!i){if(this._cannotAppendInnerHtml()){$=this.$().parent();s=this._convertToSvg(q.parseHTML(this._render()));$[0].replaceChild(s,this.$()[0]);}else{this.$()[0].outerHTML=this._render();}}this._afterRendering();};E.prototype._removeFromInvalidatedControls=function(){try{this.getUIArea()._onControlRendered(this);}catch(e){}};E.prototype._setFocus=function(f){var n=f?"addClass":"removeClass";this.$()[n](this.FOCUS_CLASS);};E.prototype._useInLayout=function(){return true;};E.prototype._hasFocus=function(){return this.$().hasClass(this.FOCUS_CLASS);};E.prototype._hasCustomStatus=function(s){var s=s||this.getStatus();if(s===a.Standard||s===a.Error||s===a.Warning||s===a.Success){return false;}return!!s;};E.prototype._getElementId=function(s){return s?this.getId()+s:this.getId();};E.prototype._getColor=function(t,s){var p=this.getParent(),f,o,c="";var b=function(){if(typeof this.getSelected==="function"&&this.getSelected()){if(t===E.ColorType.Background||t===E.ColorType.Content||t===E.ColorType.Border){t="Selected"+t;}if(t==E.ColorType.HeaderContent&&this._isBox()){t=E.ColorType.Content;}}}.bind(this);s=s||this.getStatus();if(!this._hasCustomStatus(s)){return"";}if(!p||!t){return"";}o=p._oStatuses[s];if(o){if(t.indexOf("Focus")!==-1){if(!o.getUseFocusColorAsContentColor()){return"";}t=t.replace("Focus","Content");}b();f="get"+t+"Color";var n=o[f]();if(n){var c=P.get(n);if(!c&&n&&V.isValid(n)){c=n;}}}return c?c:"";};E.prototype._getColorStyle=function(p,c){var s="";Object.keys(p).forEach(function(k){var C=this._getColor(p[k]);if(C){if(s){s+=";";}s+=k+":"+C;}},this);if(c&&s){s="style=\""+s+"\"";}return s;};E.prototype._checkForProcessData=function(){var p=this.getParent();if(p&&p._bRequiresDataProcessing){p._processData();}};E.prototype.getVisibleAttributes=function(){return this.getAttributes().filter(function(A){return A.getVisible();});};E.prototype.setProperty=function(p,v,s){var b=Object.getPrototypeOf(this).aProcessRequiredProperties;M.prototype.setProperty.call(this,p,v,s);if(b&&(b.indexOf(p)!==-1)&&this.getParent()){this.getParent()._bRequiresDataProcessing=true;}};E.prototype.toString=function(){return this.getMetadata()._sClassName+" - "+this.getTitle();};E.prototype._correctTitle=function(c){if(this.getTitle()){var $=this.$().find("."+c);if($[0]){var t=$[0].getBBox().width,m=parseInt($.attr("maxwidth"),10);if(t>m){this._createText($[0],{text:this.getTitle(),hCenter:true});}}}};E.prototype._renderTitle=function(A){var b=10;var h=this._renderControl("g",{"clip-path":"url(#"+this.getId()+"-title-clip)"},false);h+=this._renderText({attributes:{"style":A.style,"class":A.class,x:A.x,y:A.y,maxWidth:A.maxWidth},text:A.title,height:b});h+="</g>";return h;};E.prototype._renderClipPath=function(A){var h=this._renderControl("clipPath",{id:A.id},false);h+=this._renderControl("rect",{x:A.x,y:A.y,width:A.width||this._iWidth,height:A.height||this._iHeight,direction:A.direction||""});h+="</clipPath>";return h;};E.prototype.setVisible=function(v){var g=this.getParent();this.setProperty("visible",v);if(g){g.setFocus(null);g._setupKeyboardNavigation();}return this;};E.prototype.setStatus=function(s){var g=this.getParent();this.setProperty("status",s);if(g){g.updateLegend();}return this;};E.ColorType=Object.freeze({Background:"Background",Border:"Border",Content:"Content",HeaderContent:"HeaderContent",SelectedBorder:"SelectedBorder",SelectedBackground:"SelectedBackground",SelectedContent:"SelectedContent",HoverBackground:"HoverBackground",HoverBorder:"HoverBorder",HoverContent:"HoverContent",Focus:"Focus",HoverFocus:"HoverFocus",SelectedFocus:"SelectedFocus"});return E;});
