sap.ui.define([],function(){"use strict";var T=function(){this.init.apply(this,arguments);};T.prototype={init:function(p){var t=this;sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(c){t.corssAppNavigator=c;});},prefetch:function(){},search:function(q){var t=this;var s=new jQuery.Deferred();var r={totalCount:0,tiles:[]};t.oModel=sap.ushell.renderers.fiori2.search.getModelSingleton();var a=t.oModel.getProperty('/transactionDataSource');if(a===null){return r;}var b=t.oModel.sinaNext.createSearchQuery();b.skip=q.skip;b.top=q.top;b.filter.searchTerm=t._normalizeSearchTerm(q.searchTerm);b.filter.dataSource=a;t.oModel.sinaNext.provider.executeSearchQuery(b).then(function(c){r.totalCount=c.totalCount;var d=[];for(var i=0;i<c.items.length;i++){d.push(t._buildItemDataAsync(c.items[i]));}return jQuery.when.apply(null,d).then(function(){r.tiles=arguments;s.resolve(r);});},function(e){s.reject(e);});return s;},_buildItemDataAsync:function(i){var t=this;var a=new jQuery.Deferred();var b={};var c=t._getTcode(i).value;var d=t._getTcode(i).valueHighlighted;var e=t._getTitle(i).value;var f=t._getTitle(i).valueHighlighted+" - "+d;var u=t._getUshellUrl(i);var g=t._getBackendUrl(i);b={type:"transaction",icon:"sap-icon://action",title:e,label:f,subtitle:c,isUshellSupported:false,url:""};t.corssAppNavigator.isIntentSupported([u]).then(function(h){b.isUshellSupported=h[u].supported;if(b.isUshellSupported){b.url=u;}else{b.url=g;}a.resolve(b);},function(h){a.reject(h);});return a;},_normalizeSearchTerm:function(s){if(s==="*"){return s;}var f="";s=s.replace('*',' ');var a=s.split(' ');a.forEach(function(e){e=" *"+e+"* ";f=f+e;});return f;},_getTitle:function(a){var b=a.detailAttributes;var t={value:"",valueHighlighted:""};for(var i=0;i<b.length;i++){if(b[i].id==="TTEXT"){t.value=b[i].value||sap.ushell.resources.i18n.getText("transactionText");t.valueHighlighted=b[i].valueHighlighted||t.value;break;}}return t;},_getTcode:function(a){var b=a.titleAttributes;var t={value:"",valueHighlighted:""};for(var i=0;i<b.length;i++){if(b[i].id==="TCODE"){t.value=b[i].value;t.valueHighlighted=b[i].valueHighlighted||t.value;break;}}return t;},_getUshellUrl:function(i){var t=this;var s="";var a="";if(this.oModel.sinaNext.provider.serverInfo){s="sap-system="+t.oModel.sinaNext.provider.serverInfo.SystemId;}if(t._getTcode(i)!==""){a="&sap-ui2-tcode="+t._getTcode(i).value;}return"#Shell-startGUI?"+s+a;},_getBackendUrl:function(i){var t=this;var u="";if(this.oModel.sinaNext.provider.serverInfo){var h=t.oModel.sinaNext.provider.serverInfo.URL;var p=t.oModel.sinaNext.provider.serverInfo.Port;var c=t.oModel.sinaNext.provider.serverInfo.Client;var a=t._getTcode(i).value;if(h&&p&&c&&a.length!==""){u=h+":"+p+"/sap/bc/gui/sap/its/webgui/?sap-client="+c+"&~transaction="+a;}}return u;}};return T;});
