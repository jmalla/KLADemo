// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/appRuntime/ui5/AppRuntimeHandlers","sap/ushell/appRuntime/ui5/AppRuntimeService"],function(A,a){"use strict";var i;function b(){}b.prototype.main=function(){var t=this,u=jQuery.sap.getUriParameters();A.getInstance();this.getAppInfo(u).done(function(o){var c=o;t._CreateApplication(o).done(function(C){t._renderApplication(C,c);});});};b.prototype.getAppInfo=function(u){var d=new jQuery.Deferred();sap.ui.require([window["sap-ushell-config"].isolation.AppResolution.adapter.config.module.replace(/\./g,'/')],function(c){c.init(window["sap-ushell-config"].isolation.AppResolution);c.getAppInfo(u).done(function(o){d.resolve(o);});});return d.promise();};b.prototype._CreateApplication=function(o){var d=new jQuery.Deferred();sap.ushell.Container.getService("Ui5ComponentLoader").createComponent(o.oTarget,o.oHash,false).done(function(c){d.resolve(c);});return d.promise();};b.prototype._renderApplication=function(c,o){var d=new jQuery.Deferred();function t(n,e){if(n&&typeof n==="string"&&n.length>0){a.getInstance().sendMessageToOuterShell("sap.ushell.services.ShellNavigation.hashChange",{"newHash":n});}}window.hasher.changed.add(t.bind(this),this);var C=new sap.ui.core.ComponentContainer({id:o.oHash.action+"-container-id",component:c.componentHandle._oComponent,width:"100%",height:"100%"});C.placeAt("canvas");d.resolve();return d.promise();};return{getInstance:function(){if(!i){i=new b();}return i;}};},false);
