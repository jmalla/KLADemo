sap.ui.define(["sap/ushell/utils","sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations"],function(u,R){"use strict";function g(o,A){return u.getMember(o,A);}function a(o,A,d){return u.getNestedObjectProperty(o,A,d);}function m(k,s,A,v,V){s=u.clone(s);A=u.clone(A);v=v||{};V=V||{};var i={};i.semanticObject=g(s,"semanticObject");i.action=g(s,"action");var o=R.getConfig(v);i.title=a([o,s,A,V],["sap|app.title","title","sap|app.title","sap|app.title"]);i.info=a([o,s,A,V],["sap|app.info","info","sap|app.info","sap|app.info"]);i.icon=a([o,s,A,V],["sap|ui.icons.icon","icon","sap|ui.icons.icon","sap|ui.icons.icon"]);i.subTitle=a([o,s,A,V],["sap|app.subTitle","subTitle","sap|app.subTitle","sap|app.subTitle"]);i.shortTitle=a([o,s,A,V],["sap|app.shortTitle","shortTitle","sap|app.shortTitle","sap|app.shortTitle"]);i.deviceTypes=g(A,"sap|ui.deviceTypes")||{};["desktop","tablet","phone"].forEach(function(M){if(Object.prototype.hasOwnProperty.call(g(s,"deviceTypes")||{},M)){i.deviceTypes[M]=s.deviceTypes[M];}if(!Object.prototype.hasOwnProperty.call(i.deviceTypes,M)){i.deviceTypes[M]=true;}i.deviceTypes[M]=!!i.deviceTypes[M];});i.signature=g(s,"signature")||{};i.signature.parameters=g(i,"signature.parameters")||{};i.signature.additionalParameters=g(s,"signature.additionalParameters")||"allowed";var S=g(A,"sap|platform|runtime");i.resolutionResult=jQuery.extend(true,{},S);if(S){i.resolutionResult["sap.platform.runtime"]=jQuery.extend(true,{},S);}if(g(A,"sap|ui.technology")==="GUI"){i.resolutionResult["sap.gui"]=g(A,"sap|gui");}if(g(A,"sap|ui.technology")==="WDA"){i.resolutionResult["sap.wda"]=g(A,"sap|wda");}if(g(A,"sap|ui.technology")==="URL"){if(A["sap.url"]){i.resolutionResult["sap.platform.runtime"]=i.resolutionResult["sap.platform.runtime"]||{};i.resolutionResult.url=A["sap.url"].uri;i.resolutionResult["sap.platform.runtime"].url=A["sap.url"].uri;}else if(S&&S.uri){i.resolutionResult["sap.platform.runtime"].url=S.uri;i.resolutionResult.url=S.uri;}}if(!i.resolutionResult["sap.ui"]){i.resolutionResult["sap.ui"]={};}i.resolutionResult["sap.ui"].technology=g(A,"sap|ui.technology");i.resolutionResult.applicationType=this._formatApplicationType(i.resolutionResult,A);i.resolutionResult.systemAlias=i.resolutionResult.systemAlias||g(s,"systemAlias");i.resolutionResult.systemAliasSemantics="apply";i.resolutionResult.text=i.title;i.resolutionResult.appId=g(A,"sap|app.id");var T,d;var I=g(v,"vizConfig.sap|flp.indicatorDataSource");var e={};if(!jQuery.isEmptyObject(V)){e.url=g(V,"sap|platform|runtime.componentProperties.url");e.componentName=g(V,"sap|ui5.componentName");if(g(V,"sap|platform|runtime.includeManifest")){e.componentProperties=e.componentProperties||{};e.componentProperties.manifest=jQuery.extend(true,{},V);delete e.componentProperties.manifest["sap.platform.runtime"];}}if(g(A,"sap|app.type")==="plugin"||g(A,"sap|flp.type")==="plugin"){return undefined;}var h=a([o,A,V],"sap|flp.tileSize");var j=a([o,A,V],"sap|app.description");if(g(A,"sap|ui.technology")==="GUI"&&g(A,"sap|gui.transaction")){T=g(A,"sap|gui.transaction");}if(g(A,"sap|ui.technology")==="WDA"&&g(A,"sap|wda.applicationId")){T=g(A,"sap|wda.applicationId");}var D=a([o,A,V],"sap|app.dataSources");if(g(A,"sap|app.id")){d=g(A,"sap|app.id");}i.tileResolutionResult={appId:d,title:i.title,subTitle:i.subTitle,icon:i.icon,size:h,info:i.info,tileComponentLoadInfo:e,indicatorDataSource:I,dataSources:D,description:j,runtimeInformation:S,technicalInformation:T,deviceTypes:i.deviceTypes};return i;}function f(r,A){var s=r.applicationType;if(s){return s;}var C=g(A,"sap|platform|runtime.componentProperties.self.name")||g(A,"sap|ui5.componentName");if(g(A,"sap|flp.appType")==="UI5"||g(A,"sap|ui.technology")==="UI5"){r.applicationType="SAPUI5";r.additionalInformation="SAPUI5.Component="+C;r.url=g(A,"sap|platform|runtime.componentProperties.url");r.applicationDependencies=g(A,"sap|platform|runtime.componentProperties");return"SAPUI5";}if(g(A,"sap|ui.technology")==="GUI"){r.applicationType="TR";r["sap.gui"]=g(A,"sap|gui");r.systemAlias=g(A,"sap|app.destination.name");return"TR";}if(g(A,"sap|ui.technology")==="WDA"){r.applicationType="WDA";r["sap.wda"]=g(A,"sap|wda");r.systemAlias=g(A,"sap|app.destination.name");return"WDA";}if(g(A,"sap|ui.technology")==="URL"){r.applicationType="URL";r.systemAlias=g(A,"sap|app.destination.name");}return"URL";}function b(s){var d=this;if(!s){return[];}var i=[];try{var S=Object.keys(s.applications||{}).sort();S.forEach(function(A){try{var o=s.applications[A];var h=g(o,"sap|app.crossNavigation.inbounds");if(h){var l=Object.keys(h).sort();l.forEach(function(I){var j=h[I];var r=d.mapOne(I,j,o);if(r){i.push(r);}});}}catch(E){jQuery.sap.log.error("Error in application "+A+": "+E,E.stack);}});}catch(e){jQuery.sap.log.error(e);jQuery.sap.log.error(e.stack);return[];}return i;}function t(i){var s,p,C;s={target:{semanticObject:i.semanticObject,action:i.action},params:{}};p=jQuery.sap.getObject("signature.parameters",undefined,i)||{};Object.keys(p).forEach(function(k){if(p[k].filter&&Object.prototype.hasOwnProperty.call(p[k].filter,"value")&&(p[k].filter.format===undefined||p[k].filter.format==="plain")){s.params[k]=[p[k].filter.value];}if(p[k].launcherValue&&Object.prototype.hasOwnProperty.call(p[k].launcherValue,"value")&&(p[k].launcherValue.format===undefined||p[k].launcherValue.format==="plain")){s.params[k]=[p[k].launcherValue.value];}});C=sap.ushell.Container.getService("URLParsing").constructShellHash(s);if(!C){return undefined;}return C;}function c(o){var s,p,C;s={target:{semanticObject:o.semanticObject,action:o.action},params:{}};p=o.parameters||{};Object.keys(p).forEach(function(k){if(p.hasOwnProperty(k)&&typeof p[k].value==="object"){s.params[k]=[p[k].value.value];}});C=sap.ushell.Container.getService("URLParsing").constructShellHash(s);if(!C){return undefined;}return C;}return{formatSite:b,toHashFromInbound:t,toHashFromOutbound:c,mapOne:m,_formatApplicationType:f};},true);
