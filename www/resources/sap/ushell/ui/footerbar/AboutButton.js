// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.define(['sap/m/Button','sap/m/Dialog','sap/m/ObjectHeader','sap/m/VBox','sap/ui/layout/form/SimpleForm','sap/ushell/library','sap/ushell/resources','sap/ushell/ui/launchpad/ActionItem','sap/ushell/services/AppConfiguration','sap/m/Label','sap/m/Text','sap/ushell/utils/type','./AboutButtonRenderer'],function(B,D,O,V,S,l,r,A,a,L,T,t){"use strict";var b=A.extend("sap.ushell.ui.footerbar.AboutButton",{metadata:{library:"sap.ushell"}});b.prototype.init=function(){if(A.prototype.init){A.prototype.init.apply(this,arguments);}this.setIcon('sap-icon://hint');this.setText(r.i18n.getText("about"));this.setTooltip(r.i18n.getText("about"));this.attachPress(this.showAboutDialog);};b.prototype.showAboutDialog=function(){var c=r.i18n,m=a.getMetadata(),o=sap.ushell.Container.getService("AppLifeCycle").getCurrentApplication(),s=new S({id:'aboutDialogFormID',editable:false,layout:sap.ui.layout.form.SimpleFormLayout.ResponsiveGridLayout,content:[new L({text:c.getText("technicalName")}),new T({text:m.technicalName||''}),new L({text:c.getText("fioriVersionFld")}),new T({text:m.version||''}),new L({text:c.getText("sapui5Fld")}),new T({text:(sap.ui.version||"")+(' ('+(sap.ui.buildinfo.buildtime||"")+')')||''}),new L({text:c.getText("userAgentFld")}),new T({text:navigator.userAgent||''}),new L({text:''})]}),h=new O({title:m.title,icon:m.icon}).addStyleClass('sapUshellAboutDialogHeader'),d,v,e=new B({text:c.getText("okBtn"),press:function(){d.close();}});if(o){o.getTechnicalParameter("sap-fiori-id").then(function(f){if(t.isArray(f)&&f[0]){s.addContent(new L({text:c.getText("fioriAppId")}));s.addContent(new T({text:f[0]}));}},function(E){jQuery.sap.log.error("Cannot get technical parameter 'sap-fiori-id'",E,"sap.ushell.ui.footerbar.AboutButton");});o.getTechnicalParameter("sap-ach").then(function(f){if(t.isArray(f)&&f[0]){s.addContent(new L({text:c.getText("sapAch")}));s.addContent(new T({text:f[0]}));}},function(E){jQuery.sap.log.error("Cannot get technical parameter 'sap-ach'",E,"sap.ushell.ui.footerbar.AboutButton");});}if(jQuery.isEmptyObject(m)||!m.icon){v=new V({items:[s]});}else{v=new V({items:[h,s]});}d=new D({id:"aboutContainerDialogID",title:c.getText("about"),contentWidth:"25rem",horizontalScrolling:false,leftButton:e,afterClose:function(){d.destroy();}});d.addContent(v);d.open();};return b;},true);
